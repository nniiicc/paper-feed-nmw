{"version":3,"file":"background.bundle.js","sources":["../node_modules/gh-store-client/dist/index.mjs","../../papers/types.ts","../../utils/logger.ts","../../papers/manager.ts","../../utils/session-service.ts","../../utils/popup-manager.ts","../../source-integration/source-manager.ts","../../source-integration/metadata-extractor.ts","../../source-integration/base-source.ts","../../source-integration/arxiv/index.ts","../../source-integration/openreview/index.ts","../../source-integration/nature/index.ts","../../source-integration/pnas/index.ts","../../source-integration/sciencedirect/index.ts","../../source-integration/springer/index.ts","../../source-integration/ieee/index.ts","../../source-integration/acm/index.ts","../../source-integration/acl/index.ts","../../source-integration/neurips/index.ts","../../source-integration/cvf/index.ts","../../source-integration/wiley/index.ts","../../source-integration/plos/index.ts","../../source-integration/biorxiv/index.ts","../../source-integration/medrxiv/index.ts","../../source-integration/ssrn/index.ts","../../source-integration/semanticscholar/index.ts","../../source-integration/misc/index.ts","../../source-integration/registry.ts","../../background.ts"],"sourcesContent":["var f=(i=>(i.GH_STORE=\"gh-store\",i.STORED_OBJECT=\"stored-object\",i.DEPRECATED=\"deprecated-object\",i.UID_PREFIX=\"UID:\",i.ALIAS_TO_PREFIX=\"ALIAS-TO:\",i))(f||{});var m=class{constructor(e={}){this.cache=new Map,this.maxSize=e.maxSize??1e3,this.ttl=e.ttl??1e3*60*60,this.accessOrder=[]}get(e){let t=this.cache.get(e);if(t){if(Date.now()-t.lastAccessed>this.ttl){this.cache.delete(e),this.removeFromAccessOrder(e);return}return t.lastAccessed=Date.now(),this.updateAccessOrder(e),t.issueNumber}}set(e,t,r){if(this.cache.size>=this.maxSize&&!this.cache.has(e)){let s=this.accessOrder[this.accessOrder.length-1];s&&(this.cache.delete(s),this.removeFromAccessOrder(s))}this.cache.set(e,{issueNumber:t,lastAccessed:Date.now(),createdAt:r.createdAt,updatedAt:r.updatedAt}),this.updateAccessOrder(e)}remove(e){this.cache.delete(e),this.removeFromAccessOrder(e)}clear(){this.cache.clear(),this.accessOrder=[]}getStats(){return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl}}shouldRefresh(e,t){let r=this.cache.get(e);return r?t>r.updatedAt:!0}updateAccessOrder(e){this.removeFromAccessOrder(e),this.accessOrder.unshift(e)}removeFromAccessOrder(e){let t=this.accessOrder.indexOf(e);t>-1&&this.accessOrder.splice(t,1)}};var y=\"0.11.1\";var d=class{constructor(e,t,r={}){if(this.token=e,this.repo=t,!this.repo)throw new Error(\"Repository is required\");this.config={baseLabel:r.baseLabel??\"stored-object\",uidPrefix:r.uidPrefix??\"UID:\",reactions:{processed:r.reactions?.processed??\"+1\",initialState:r.reactions?.initialState??\"rocket\"}},this.cache=new m(r.cache)}isPublic(){return this.token===null}async fetchFromGitHub(e,t={}){let r=new URL(`https://api.github.com/repos/${this.repo}${e}`);t.params&&(Object.entries(t.params).forEach(([a,n])=>{r.searchParams.append(a,n)}),delete t.params);let s={Accept:\"application/vnd.github.v3+json\"};if(t.headers){let a=t.headers;Object.keys(a).forEach(n=>{s[n]=a[n]})}this.token&&(s.Authorization=`token ${this.token}`);let i=await fetch(r.toString(),{...t,headers:s});if(!i.ok)throw new Error(`GitHub API error: ${i.status}`);return i.json()}createCommentPayload(e,t,r){let s={_data:e,_meta:{client_version:y,timestamp:new Date().toISOString(),update_mode:\"append\",issue_number:t}};return r&&(s.type=r),s}async getObject(e){let t=this.cache.get(e),r;if(t)try{r=await this.fetchFromGitHub(`/issues/${t}`),this._verifyIssueLabels(r,e)||(this.cache.remove(e),r=void 0)}catch{this.cache.remove(e)}if(!r){let c=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:[\"gh-store\",this.config.baseLabel,`${this.config.uidPrefix}${e}`].join(\",\"),state:\"closed\"}});if(!c||c.length===0)throw new Error(`No object found with ID: ${e}`);r=c[0]}if(!r?.body)throw new Error(`Invalid issue data received for ID: ${e}`);let s=JSON.parse(r.body),i=new Date(r.created_at),a=new Date(r.updated_at);return this.cache.set(e,r.number,{createdAt:i,updatedAt:a}),{meta:{objectId:e,label:`${this.config.uidPrefix}${e}`,issueNumber:r.number,createdAt:i,updatedAt:a,version:await this._getVersion(r.number)},data:s}}async createObject(e,t,r=[]){if(!this.token)throw new Error(\"Authentication required for creating objects\");let s=`${this.config.uidPrefix}${e}`,i=[\"gh-store\",this.config.baseLabel,s,...r],a=await this.fetchFromGitHub(\"/issues\",{method:\"POST\",body:JSON.stringify({title:`Stored Object: ${e}`,body:JSON.stringify(t,null,2),labels:i})});this.cache.set(e,a.number,{createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)});let n=this.createCommentPayload(t,a.number,\"initial_state\"),c=await this.fetchFromGitHub(`/issues/${a.number}/comments`,{method:\"POST\",body:JSON.stringify({body:JSON.stringify(n,null,2)})});return await this.fetchFromGitHub(`/issues/comments/${c.id}/reactions`,{method:\"POST\",body:JSON.stringify({content:this.config.reactions.processed})}),await this.fetchFromGitHub(`/issues/comments/${c.id}/reactions`,{method:\"POST\",body:JSON.stringify({content:this.config.reactions.initialState})}),await this.fetchFromGitHub(`/issues/${a.number}`,{method:\"PATCH\",body:JSON.stringify({state:\"closed\"})}),{meta:{objectId:e,label:s,issueNumber:a.number,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at),version:1},data:t}}_verifyIssueLabels(e,t){let r=new Set([this.config.baseLabel,`${this.config.uidPrefix}${t}`]);return e.labels.some(s=>r.has(s.name))}async updateObject(e,t){if(!this.token)throw new Error(\"Authentication required for updating objects\");let r=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:[this.config.baseLabel,`${this.config.uidPrefix}${e}`].join(\",\"),state:\"all\"}});if(!r||r.length===0)throw new Error(`No object found with ID: ${e}`);let s=r[0],i=this.createCommentPayload(t,s.number);return await this.fetchFromGitHub(`/issues/${s.number}/comments`,{method:\"POST\",body:JSON.stringify({body:JSON.stringify(i,null,2)})}),await this.fetchFromGitHub(`/issues/${s.number}`,{method:\"PATCH\",body:JSON.stringify({state:\"open\"})}),this.getObject(e)}async listAll(){let e=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:this.config.baseLabel,state:\"closed\"}}),t={};for(let r of e)if(!r.labels.some(s=>s.name===\"archived\"))try{let s=this._getObjectIdFromLabels(r),i=JSON.parse(r.body),a={objectId:s,label:s,issueNumber:r.number,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at),version:await this._getVersion(r.number)};t[s]={meta:a,data:i}}catch{continue}return t}async listUpdatedSince(e){let t=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:this.config.baseLabel,state:\"closed\",since:e.toISOString()}}),r={};for(let s of t)if(!s.labels.some(i=>i.name===\"archived\"))try{let i=this._getObjectIdFromLabels(s),a=JSON.parse(s.body),n=new Date(s.updated_at);if(n>e){let c={objectId:i,label:i,issueNumber:s.number,createdAt:new Date(s.created_at),updatedAt:n,version:await this._getVersion(s.number)};r[i]={meta:c,data:a}}}catch{continue}return r}async getObjectHistory(e){let t=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:[this.config.baseLabel,`${this.config.uidPrefix}${e}`].join(\",\"),state:\"all\"}});if(!t||t.length===0)throw new Error(`No object found with ID: ${e}`);let r=t[0],s=await this.fetchFromGitHub(`/issues/${r.number}/comments`),i=[];for(let a of s)try{let n=JSON.parse(a.body),c=\"update\",u,p={client_version:\"legacy\",timestamp:a.created_at,update_mode:\"append\"};typeof n==\"object\"?\"_data\"in n?(c=n.type||\"update\",u=n._data,p=n._meta||p):\"type\"in n&&n.type===\"initial_state\"?(c=\"initial_state\",u=n.data):u=n:u=n,i.push({timestamp:a.created_at,type:c,data:u,commentId:a.id})}catch{continue}return i}async _getVersion(e){return(await this.fetchFromGitHub(`/issues/${e}/comments`)).length+1}_getObjectIdFromLabels(e){for(let t of e.labels)if(t.name!==this.config.baseLabel&&t.name.startsWith(this.config.uidPrefix))return t.name.slice(this.config.uidPrefix.length);throw new Error(`No UID label found with prefix ${this.config.uidPrefix}`)}};var h={baseLabel:\"stored-object\",uidPrefix:\"UID:\",reactions:{processed:\"+1\",initialState:\"rocket\"},retries:{maxAttempts:3,backoffFactor:2},rateLimit:{maxRequestsPerHour:1e3}};function H(o){return{...h,...o,reactions:{...h.reactions,...o.reactions},retries:{...h.retries,...o.retries},rateLimit:{...h.rateLimit,...o.rateLimit}}}function N(o){return/^gh[ps]_[a-zA-Z0-9]{36}$/.test(o)}function J(o){return/^[\\w-]+\\/[\\w-]+$/.test(o)}var g=class extends Error{constructor(e){super(e),this.name=\"ConfigError\"}},O=class extends g{constructor(e=\"Invalid GitHub token format\"){super(e),this.name=\"TokenError\"}},w=class extends g{constructor(e=\"Invalid repository format. Use owner/repo\"){super(e),this.name=\"RepoError\"}};var E={level:\"info\",silent:!1},A={error:3,warn:2,info:1,debug:0},b=class{constructor(e,t={}){this.entries=[];this.moduleName=e,this.config={...E,...t}}debug(e,t){this.log(\"debug\",e,t)}info(e,t){this.log(\"info\",e,t)}warn(e,t){this.log(\"warn\",e,t)}error(e,t){this.log(\"error\",e,t)}log(e,t,r){if(A[e]<A[this.config.level])return;let s={timestamp:new Date().toISOString(),level:e,module:this.moduleName,message:t,metadata:r};this.entries.push(s)}getEntries(){return[...this.entries]}clearEntries(){this.entries=[]}configure(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}};var l=new b(\"CanonicalStore\"),S=class extends d{constructor(e,t,r={}){super(e,t,r),this.canonicalizeByDefault=r.canonicalize??!0,this.visitedIds=new Set,this._ensureSpecialLabels().catch(s=>{l.warn(`Could not ensure special labels exist: ${s.message}`)})}async _ensureSpecialLabels(){let e=[{name:\"gh-store\",color:\"6f42c1\",description:\"All issues managed by gh-store system\"}];try{let t=await this.fetchFromGitHub(\"/labels\"),r=new Set(t.map(s=>s.name));for(let s of e)if(!r.has(s.name))try{await this.fetchFromGitHub(\"/labels\",{method:\"POST\",body:JSON.stringify(s)})}catch(i){l.warn(`Could not create label ${s.name}: ${i.message}`)}}catch(t){l.warn(`Could not ensure special labels exist: ${t.message}`)}}async resolveCanonicalObjectId(e,t=5){return this.visitedIds=new Set,this._resolveCanonicalIdInternal(e,t)}async _resolveCanonicalIdInternal(e,t){if(t<=0)return l.warn(`Maximum alias resolution depth reached for ${e}`),e;if(this.visitedIds.has(e))return l.warn(`Circular reference detected for ${e}`),e;this.visitedIds.add(e);try{let r=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:`UID:${e},ALIAS-TO:*`,state:\"all\"}});if(r&&r.length>0){for(let s of r)for(let i of s.labels)if(i.name.startsWith(\"ALIAS-TO:\")){let a=i.name.slice(\"ALIAS-TO:\".length);return a===e?(l.error(`Self-referential alias detected for ${e}`),e):this._resolveCanonicalIdInternal(a,t-1)}}}catch(r){l.warn(`Error resolving canonical ID for ${e}: ${r.message}`)}return e}async getObject(e,t={}){if(t.canonicalize??this.canonicalizeByDefault){let s=await this.resolveCanonicalObjectId(e);return s!==e&&l.info(`Object ${e} resolved to canonical object ${s}`),super.getObject(s)}else return super.getObject(e)}async createAlias(e,t){let r;try{let i=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:`UID:${e},stored-object`,state:\"all\"}});if(!i||i.length===0)throw new Error(`Source object not found: ${e}`);r=i[0]}catch(i){throw new Error(`Error finding source object: ${i.message}`)}try{let i=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:`UID:${t},stored-object`,state:\"all\"}});if(!i||i.length===0)throw new Error(`Target object not found: ${t}`)}catch(i){throw new Error(`Error finding target object: ${i.message}`)}try{let i=await this.fetchFromGitHub(`/issues/${r.number}/labels`);for(let a of i)if(a.name.startsWith(\"ALIAS-TO:\"))throw new Error(`Object ${e} is already an alias`)}catch(i){throw i.message.includes(\"already an alias\")?i:new Error(`Error checking existing aliases: ${i.message}`)}let s=`ALIAS-TO:${t}`;try{try{await this.fetchFromGitHub(\"/labels\",{method:\"POST\",body:JSON.stringify({name:s,color:\"fbca04\"})})}catch(i){l.warn(`Could not create label ${s}: ${i.message}`)}return await this.fetchFromGitHub(`/issues/${r.number}/labels`,{method:\"POST\",body:JSON.stringify({labels:[s]})}),{success:!0,sourceId:e,targetId:t}}catch(i){throw new Error(`Failed to create alias: ${i.message}`)}}async findAliases(e){let t={};try{if(e){let r=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:`ALIAS-TO:${e}`,state:\"all\"}});for(let s of r||[]){let i=this._extractObjectIdFromLabels(s);i&&(t[i]=e)}}else{let r=await this.fetchFromGitHub(\"/issues\",{method:\"GET\",params:{labels:\"ALIAS-TO:*\",state:\"all\"}});for(let s of r||[]){let i=this._extractObjectIdFromLabels(s);if(i){for(let a of s.labels)if(a.name.startsWith(\"ALIAS-TO:\")){let n=a.name.slice(\"ALIAS-TO:\".length);t[i]=n;break}}}}return t}catch(r){return l.warn(`Error finding aliases: ${r.message}`),{}}}_extractObjectIdFromLabels(e){for(let t of e.labels)if(t.name.startsWith(\"UID:\"))return t.name.slice(\"UID:\".length);throw new Error(\"No UID label found with prefix UID:\")}};export{S as CanonicalStoreClient,g as ConfigError,h as DEFAULT_CONFIG,d as GitHubStoreClient,f as LabelNames,w as RepoError,O as TokenError,H as mergeConfig,J as validateRepo,N as validateToken};\n//# sourceMappingURL=index.mjs.map","// extension/papers/types.ts\n// Updated for heartbeat-based session tracking\n\nimport type { Json } from 'gh-store-client';\n\n/**\n * Paper metadata from any source\n */\nexport interface PaperMetadata {\n  // Source identifier\n  sourceId: string;\n  \n  // Paper identifier within the source\n  paperId: string;\n  \n  // Full URL to the paper\n  url: string;\n  \n  // Paper title\n  title: string;\n  \n  // Authors (comma-separated)\n  authors: string;\n  \n  // Abstract or summary\n  abstract: string;\n  \n  // When this paper was first added\n  timestamp: string;\n  \n  // Publication date\n  publishedDate: string;\n  \n  // Tags or categories\n  tags: string[];\n  \n  // User-assigned rating (novote, thumbsup, thumbsdown)\n  rating: string;\n  \n  // Allow additional source-specific properties\n  [key: string]: any;\n}\n\n/**\n * Reading session data - updated for heartbeat tracking\n */\nexport interface ReadingSessionData {\n  // Session identifier\n  session_id: string;\n  \n  // Paper identifiers\n  source_id?: string;\n  paper_id?: string;\n  \n  // Session timing\n  start_time: string;\n  end_time: string;\n  \n  // Heartbeat data\n  heartbeat_count: number;\n  \n  // Duration in seconds (derived from heartbeat count)\n  duration_seconds: number;\n  \n  // Legacy properties for backward compatibility\n  idle_seconds?: number;\n  total_elapsed_seconds?: number;\n}\n\n/**\n * Interaction data\n */\nexport interface Interaction {\n  // Type of interaction (reading_session, annotation, rating)\n  type: string;\n  \n  // When interaction occurred\n  timestamp: string;\n  \n  // Additional data\n  data: Json;\n}\n\n/**\n * Interaction log\n */\nexport interface InteractionLog {\n  // Source identifier\n  sourceId: string;\n  \n  // Paper identifier within the source\n  paperId: string;\n  \n  // List of interactions\n  interactions: Interaction[];\n\n  // Index signature to make it compatible with Json type\n  [key: string]: string | Interaction[] | any;\n}\n\n/**\n * Type guard for interaction log\n */\nexport function isInteractionLog(data: unknown): data is InteractionLog {\n  const log = data as InteractionLog;\n  return (\n    typeof log === 'object' &&\n    log !== null &&\n    typeof log.sourceId === 'string' &&\n    typeof log.paperId === 'string' &&\n    Array.isArray(log.interactions)\n  );\n}\n","// utils/logger.ts\n// Logging utility wrapping loguru\n\n/**\n * Logger class for consistent logging throughout the extension\n */\nexport class Logger {\n  constructor(private module: string) {}\n  \n  /**\n   * Log debug message\n   */\n  debug(message: string, data?: any): void {\n    console.debug(`[${this.module}] ${message}`, data !== undefined ? data : '');\n  }\n  \n  /**\n   * Log info message\n   */\n  info(message: string, data?: any): void {\n    console.info(`[${this.module}] ${message}`, data !== undefined ? data : '');\n  }\n  \n  /**\n   * Log warning message\n   */\n  warning(message: string, data?: any): void {\n    console.warn(`[${this.module}] ${message}`, data !== undefined ? data : '');\n  }\n\n  /**\n   * Alias for warning method (to match loguru API)\n   */\n  warn(message: string, data?: any): void {\n    this.warning(message, data);\n  }\n  \n  /**\n   * Log error message\n   */\n  error(message: string, data?: any): void {\n    console.error(`[${this.module}] ${message}`, data !== undefined ? data : '');\n  }\n}\n\n/**\n * Loguru mock for browser extension use\n */\nclass LoguruMock {\n  /**\n   * Get logger for a module\n   */\n  getLogger(module: string): Logger {\n    return new Logger(module);\n  }\n}\n\n// Export singleton instance\nexport const loguru = new LoguruMock();\n","// extension/papers/manager.ts\nimport { GitHubStoreClient } from 'gh-store-client';\nimport type { Json } from 'gh-store-client';\nimport { \n  type PaperMetadata, \n  type InteractionLog, \n  type Interaction,\n  type ReadingSessionData,\n  isInteractionLog\n} from './types';\nimport { SourceManager } from '../source-integration/types';\nimport { loguru } from '../utils/logger';\n\nconst logger = loguru.getLogger('paper-manager');\n\nexport class PaperManager {\n  constructor(\n    private client: GitHubStoreClient,\n    private sourceManager: SourceManager\n  ) {\n    logger.debug('Paper manager initialized');\n  }\n  \n  /**\n   * Get paper by source and ID\n   */\n  async getPaper(sourceId: string, paperId: string): Promise<PaperMetadata | null> {\n    const objectId = this.sourceManager.formatObjectId('paper', sourceId, paperId);\n    \n    try {\n      const obj = await this.client.getObject(objectId);\n      return obj.data as PaperMetadata;\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('No object found')) {\n        return null;\n      }\n      throw error;\n    }\n  }\n  \n  /**\n   * Get or create paper metadata\n   */\n  async getOrCreatePaper(paperData: PaperMetadata): Promise<PaperMetadata> {\n    const { sourceId, paperId } = paperData;\n    const objectId = this.sourceManager.formatObjectId('paper', sourceId, paperId);\n    const paperIdentifier = this.sourceManager.formatPaperId(sourceId, paperId);\n    \n    try {\n      const obj = await this.client.getObject(objectId);\n      const data = obj.data as PaperMetadata;\n      logger.debug(`Retrieved existing paper: ${paperIdentifier}`);\n      return data;\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('No object found')) {\n        // Create new paper\n        const defaultPaperData: PaperMetadata = {\n          ...paperData,\n          timestamp: new Date().toISOString(),\n          rating: paperData.rating || 'novote'\n        };\n\n        const newobj = await this.client.createObject(objectId, defaultPaperData);\n        logger.debug(`Created new paper: ${paperIdentifier}`);\n        // reopen to trigger metadata hydration\n        await this.client.fetchFromGitHub(`/issues/${newobj.meta.issueNumber}`, {\n          method: \"PATCH\",\n          body: JSON.stringify({ state: \"open\" })\n        });\n        return defaultPaperData;\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get or create interaction log for a paper\n   */\n  private async getOrCreateInteractionLog(sourceId: string, paperId: string): Promise<InteractionLog> {\n    const objectId = this.sourceManager.formatObjectId('interactions', sourceId, paperId);\n    const paperIdentifier = this.sourceManager.formatPaperId(sourceId, paperId);\n    \n    try {\n      const obj = await this.client.getObject(objectId);\n      const data = obj.data as unknown;\n      if (isInteractionLog(data)) {\n        return data;\n      }\n      throw new Error('Invalid interaction log format');\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('No object found')) {\n        const newLog: InteractionLog = {\n          sourceId,\n          paperId,\n          interactions: []\n        };\n        await this.client.createObject(objectId, newLog as unknown as { [key: string]: Json });\n        logger.debug(`Created new interaction log: ${paperIdentifier}`);\n        return newLog;\n      }\n      throw error;\n    }\n  }\n  \n  /**\n   * Get GitHub client instance\n   */\n  getClient(): GitHubStoreClient {\n    return this.client;\n  }\n  \n  /**\n   * Log a reading session\n   */\n  async logReadingSession(\n    sourceId: string,\n    paperId: string,\n    session: ReadingSessionData,\n    paperData?: Partial<PaperMetadata>\n  ): Promise<void> {\n    // Ensure paper exists\n    if (paperData) {\n      await this.getOrCreatePaper({\n        sourceId,\n        paperId,\n        url: paperData.url || this.sourceManager.formatPaperId(sourceId, paperId),\n        title: paperData.title || paperId,\n        authors: paperData.authors || '',\n        abstract: paperData.abstract || '',\n        timestamp: new Date().toISOString(),\n        rating: 'novote',\n        publishedDate: paperData.publishedDate || '',\n        tags: paperData.tags || []\n      });\n    }\n\n    // Log the session as an interaction\n    await this.addInteraction(sourceId, paperId, {\n      type: 'reading_session',\n      timestamp: new Date().toISOString(),\n      data: session as unknown as { [key: string]: Json }\n    });\n    \n    const paperIdentifier = this.sourceManager.formatPaperId(sourceId, paperId);\n    logger.info(`Logged reading session for ${paperIdentifier}`, { duration: session.duration_seconds });\n  }\n\n  /**\n   * Log an annotation\n   */\n  async logAnnotation(\n    sourceId: string,\n    paperId: string,\n    key: string,\n    value: Json,\n    paperData?: Partial<PaperMetadata>\n  ): Promise<void> {\n    // Ensure paper exists\n    if (paperData) {\n      await this.getOrCreatePaper({\n        sourceId,\n        paperId,\n        url: paperData.url || this.sourceManager.formatPaperId(sourceId, paperId),\n        title: paperData.title || paperId,\n        authors: paperData.authors || '',\n        abstract: paperData.abstract || '',\n        timestamp: new Date().toISOString(),\n        rating: 'novote',\n        publishedDate: paperData.publishedDate || '',\n        tags: paperData.tags || []\n      });\n    }\n\n    // Log the annotation as an interaction\n    await this.addInteraction(sourceId, paperId, {\n      type: 'annotation',\n      timestamp: new Date().toISOString(),\n      data: { key, value }\n    });\n    \n    const paperIdentifier = this.sourceManager.formatPaperId(sourceId, paperId);\n    logger.info(`Logged annotation for ${paperIdentifier}`, { key });\n  }\n\n  /**\n   * Update paper rating\n   */\n  async updateRating(\n    sourceId: string,\n    paperId: string,\n    rating: string,\n    paperData?: Partial<PaperMetadata>\n  ): Promise<void> {\n    // Ensure paper exists and get current data\n    const paper = await this.getOrCreatePaper({\n      sourceId,\n      paperId,\n      url: paperData?.url || this.sourceManager.formatPaperId(sourceId, paperId),\n      title: paperData?.title || paperId,\n      authors: paperData?.authors || '',\n      abstract: paperData?.abstract || '',\n      timestamp: new Date().toISOString(),\n      rating: 'novote',\n      publishedDate: paperData?.publishedDate || '',\n      tags: paperData?.tags || []\n    });\n\n    const objectId = this.sourceManager.formatObjectId('paper', sourceId, paperId);\n    \n    // Update paper metadata with new rating\n    await this.client.updateObject(objectId, { \n      ...paper,\n      rating \n    });\n\n    // Log rating change as an interaction\n    await this.addInteraction(sourceId, paperId, {\n      type: 'rating',\n      timestamp: new Date().toISOString(),\n      data: { rating }\n    });\n    \n    const paperIdentifier = this.sourceManager.formatPaperId(sourceId, paperId);\n    logger.info(`Updated rating for ${paperIdentifier} to ${rating}`);\n  }\n\n  /**\n   * Add interaction to log\n   */\n  private async addInteraction(sourceId: string, paperId: string, interaction: Interaction): Promise<void> {\n    const log = await this.getOrCreateInteractionLog(sourceId, paperId);\n    log.interactions.push(interaction);\n    \n    const objectId = this.sourceManager.formatObjectId('interactions', sourceId, paperId);\n    await this.client.updateObject(objectId, log as unknown as { [key: string]: Json });\n  }\n}\n","// session-service.ts\n// Simplified session tracking service for background script\n\nimport { loguru } from './logger';\nimport { PaperManager } from '../papers/manager';\nimport { ReadingSessionData, PaperMetadata } from '../papers/types';\n\nconst logger = loguru.getLogger('session-service');\n\n/**\n * Session tracking service for paper reading sessions\n * \n * Manages session state, heartbeats, and persistence\n * Designed for use in the background script (Service Worker)\n */\nexport class SessionService {\n  private activeSession: {\n    sourceId: string;\n    paperId: string;\n    startTime: Date;\n    heartbeatCount: number;\n    lastHeartbeatTime: Date;\n  } | null = null;\n  \n  private timeoutId: number | null = null;\n  private paperMetadata: Map<string, PaperMetadata> = new Map();\n  \n  // Configuration\n  private readonly HEARTBEAT_TIMEOUT = 15000; // 15 seconds\n  \n  /**\n   * Create a new session service\n   */\n  constructor(private paperManager: PaperManager | null) {\n    logger.debug('Session service initialized');\n  }\n  \n  /**\n   * Start a new session for a paper\n   */\n  startSession(sourceId: string, paperId: string, metadata?: PaperMetadata): void {\n    // End any existing session\n    this.endSession();\n    \n    // Create new session\n    this.activeSession = {\n      sourceId,\n      paperId,\n      startTime: new Date(),\n      heartbeatCount: 0,\n      lastHeartbeatTime: new Date()\n    };\n    \n    // Store metadata if provided\n    if (metadata) {\n      const key = `${sourceId}:${paperId}`;\n      this.paperMetadata.set(key, metadata);\n      logger.debug(`Stored metadata for ${key}`);\n    }\n    \n    // Start timeout check\n    this.scheduleTimeoutCheck();\n    \n    logger.info(`Started session for ${sourceId}:${paperId}`);\n  }\n  \n  /**\n   * Record a heartbeat for the current session\n   */\n  recordHeartbeat(): boolean {\n    if (!this.activeSession) {\n      return false;\n    }\n    \n    this.activeSession.heartbeatCount++;\n    this.activeSession.lastHeartbeatTime = new Date();\n    \n    // Reschedule timeout\n    this.scheduleTimeoutCheck();\n    \n    if (this.activeSession.heartbeatCount % 12 === 0) { // Log every minute (12 x 5sec heartbeats)\n      logger.debug(`Session received ${this.activeSession.heartbeatCount} heartbeats`);\n    }\n    \n    return true;\n  }\n  \n  /**\n   * Schedule a check for heartbeat timeout\n   */\n  private scheduleTimeoutCheck(): void {\n    // Clear existing timeout\n    if (this.timeoutId !== null) {\n      clearTimeout(this.timeoutId);\n    }\n    \n    // Set new timeout\n    this.timeoutId = self.setTimeout(() => {\n      this.checkTimeout();\n    }, this.HEARTBEAT_TIMEOUT);\n  }\n  \n  /**\n   * Check if the session has timed out due to missing heartbeats\n   */\n  private checkTimeout(): void {\n    if (!this.activeSession) return;\n    \n    const now = Date.now();\n    const lastTime = this.activeSession.lastHeartbeatTime.getTime();\n    \n    if ((now - lastTime) > this.HEARTBEAT_TIMEOUT) {\n      logger.info('Session timeout detected');\n      this.endSession();\n    } else {\n      this.scheduleTimeoutCheck();\n    }\n  }\n  \n  /**\n   * End the current session and get the data\n   */\n  endSession(): ReadingSessionData | null {\n    if (!this.activeSession) return null;\n    \n    // Clear timeout\n    if (this.timeoutId !== null) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n    \n    const { sourceId, paperId, startTime, heartbeatCount } = this.activeSession;\n    const endTime = new Date();\n    \n    // Calculate duration (5 seconds per heartbeat)\n    const duration = heartbeatCount * 5;\n    \n    // Calculate total elapsed time\n    const totalElapsed = endTime.getTime() - startTime.getTime();\n    const totalElapsedSeconds = Math.round(totalElapsed / 1000);\n    \n    // Set idle seconds to the difference (for backward compatibility)\n    const idleSeconds = Math.max(0, totalElapsedSeconds - duration);\n    \n    // Create session data\n    const sessionData: ReadingSessionData = {\n      session_id: `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n      source_id: sourceId,\n      paper_id: paperId,\n      start_time: startTime.toISOString(),\n      end_time: endTime.toISOString(),\n      heartbeat_count: heartbeatCount,\n      duration_seconds: duration,\n      // Legacy fields\n      idle_seconds: idleSeconds,\n      total_elapsed_seconds: totalElapsedSeconds\n    };\n    \n    // Store session if it was meaningful and we have a paper manager\n    if (this.paperManager && heartbeatCount > 0) {\n      const metadata = this.getPaperMetadata(sourceId, paperId);\n      \n      this.paperManager.logReadingSession(sourceId, paperId, sessionData, metadata)\n        .catch(err => logger.error('Failed to store session', err));\n    }\n    \n    logger.info(`Ended session for ${sourceId}:${paperId}`, {\n      duration,\n      heartbeats: heartbeatCount\n    });\n    \n    // Clear active session\n    this.activeSession = null;\n    \n    return sessionData;\n  }\n  \n  /**\n   * Check if a session is currently active\n   */\n  hasActiveSession(): boolean {\n    return this.activeSession !== null;\n  }\n  \n  /**\n   * Get information about the current session\n   */\n  getCurrentSession(): { sourceId: string, paperId: string } | null {\n    if (!this.activeSession) return null;\n    \n    return {\n      sourceId: this.activeSession.sourceId,\n      paperId: this.activeSession.paperId\n    };\n  }\n  \n  /**\n   * Get paper metadata for the current or specified session\n   */\n  getPaperMetadata(sourceId?: string, paperId?: string): PaperMetadata | undefined {\n    if (!sourceId || !paperId) {\n      if (!this.activeSession) return undefined;\n      sourceId = this.activeSession.sourceId;\n      paperId = this.activeSession.paperId;\n    }\n    \n    return this.paperMetadata.get(`${sourceId}:${paperId}`);\n  }\n  \n  /**\n   * Store paper metadata\n   */\n  storePaperMetadata(metadata: PaperMetadata): void {\n    const key = `${metadata.sourceId}:${metadata.paperId}`;\n    this.paperMetadata.set(key, metadata);\n  }\n  \n  /**\n   * Get time since last heartbeat in milliseconds\n   */\n  getTimeSinceLastHeartbeat(): number | null {\n    if (!this.activeSession) {\n      return null;\n    }\n    \n    return Date.now() - this.activeSession.lastHeartbeatTime.getTime();\n  }\n  \n  /**\n   * Get session statistics for debugging\n   */\n  getSessionStats(): any {\n    if (!this.activeSession) {\n      return { active: false };\n    }\n    \n    return {\n      active: true,\n      sourceId: this.activeSession.sourceId,\n      paperId: this.activeSession.paperId,\n      startTime: this.activeSession.startTime.toISOString(),\n      heartbeatCount: this.activeSession.heartbeatCount,\n      lastHeartbeatTime: this.activeSession.lastHeartbeatTime.toISOString(),\n      elapsedTime: Math.round((Date.now() - this.activeSession.startTime.getTime()) / 1000)\n    };\n  }\n}\n","// extension/utils/popup-manager.ts\n// Popup management system integrated with source manager\n\nimport { SourceManager } from '../source-integration/types';\nimport { PaperManager } from '../papers/manager';\nimport { PaperMetadata } from '../papers/types';\nimport { loguru } from './logger';\n\nconst logger = loguru.getLogger('popup-manager');\n\n/**\n * Popup handler information\n */\ninterface PopupHandler {\n  selector: string;\n  event: string;\n  action: string;\n}\n\n/**\n * Popup message type\n */\ninterface ShowPopupMessage {\n  type: 'showPopup';\n  sourceId: string;\n  paperId: string;\n  html: string;\n  handlers: PopupHandler[];\n  position?: { x: number, y: number };\n}\n\n/**\n * Manages all popup-related functionality\n */\nexport class PopupManager {\n  // Source manager and paper manager\n  private sourceManagerProvider: () => SourceManager | null;\n  private paperManagerProvider: () => PaperManager | null;\n  \n  /**\n   * Create a new popup manager\n   */\n  constructor(\n    sourceManagerProvider: () => SourceManager | null,\n    paperManagerProvider: () => PaperManager | null\n  ) {\n    this.sourceManagerProvider = sourceManagerProvider;\n    this.paperManagerProvider = paperManagerProvider;\n    \n    this.setupMessageListeners();\n    logger.debug('Popup manager initialized');\n  }\n  \n  /**\n   * Set up message listeners for popup-related messages\n   */\n  private setupMessageListeners(): void {\n    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n      // Handle popup actions (ratings, notes, etc.)\n      if (message.type === 'popupAction') {\n        this.handlePopupAction(\n          message.sourceId,\n          message.paperId,\n          message.action,\n          message.data\n        ).then(() => {\n          sendResponse({ success: true });\n        }).catch(error => {\n          logger.error('Error handling popup action', error);\n          sendResponse({ \n            success: false, \n            error: error instanceof Error ? error.message : 'Unknown error' \n          });\n        });\n        \n        return true; // Will respond asynchronously\n      }\n      \n      // Handle request to show annotation popup\n      if (message.type === 'showAnnotationPopup' && sender.tab?.id) {\n        this.handleShowAnnotationPopup(\n          sender.tab.id,\n          message.sourceId,\n          message.paperId,\n          message.position\n        ).then(() => {\n          sendResponse({ success: true });\n        }).catch(error => {\n          logger.error('Error showing popup', error);\n          sendResponse({ \n            success: false, \n            error: error instanceof Error ? error.message : 'Unknown error'\n          });\n        });\n        \n        return true; // Will respond asynchronously\n      }\n      \n      return false; // Not handled\n    });\n  }\n  \n  /**\n   * Handle a request to show an annotation popup\n   */\n  private async handleShowAnnotationPopup(\n    tabId: number,\n    sourceId: string,\n    paperId: string,\n    position: { x: number, y: number }\n  ): Promise<void> {\n    logger.debug(`Showing annotation popup for ${sourceId}:${paperId}`);\n    \n    // Check if we have source and paper manager\n    const sourceManager = this.sourceManagerProvider();\n    const paperManager = this.paperManagerProvider();\n    \n    if (!sourceManager) {\n      throw new Error('Source manager not initialized');\n    }\n    \n    if (!paperManager) {\n      throw new Error('Paper manager not initialized');\n    }\n    \n    try {\n      // Get paper data\n      const paper = await paperManager.getPaper(sourceId, paperId);\n      \n      // Create popup HTML\n      const html = this.createPopupHtml(paper || { \n        sourceId, \n        paperId,\n        title: paperId,\n        authors: '',\n        abstract: '',\n        url: '',\n        timestamp: new Date().toISOString(),\n        publishedDate: '',\n        tags: [],\n        rating: 'novote'\n      });\n      \n      // Get handlers\n      const handlers = this.getStandardPopupHandlers();\n      \n      // Send message to content script to show popup\n      const message: ShowPopupMessage = {\n        type: 'showPopup',\n        sourceId,\n        paperId,\n        html,\n        handlers,\n        position\n      };\n      \n      await chrome.tabs.sendMessage(tabId, message);\n      \n      logger.debug(`Sent popup to content script for ${sourceId}:${paperId}`);\n    } catch (error) {\n      logger.error(`Error showing popup for ${sourceId}:${paperId}`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Handle popup actions (ratings, notes, etc.)\n   */\n  private async handlePopupAction(\n    sourceId: string,\n    paperId: string,\n    action: string,\n    data: any\n  ): Promise<void> {\n    const paperManager = this.paperManagerProvider();\n    \n    if (!paperManager) {\n      throw new Error('Paper manager not initialized');\n    }\n    \n    logger.debug(`Handling popup action: ${action}`, { sourceId, paperId });\n    \n    try {\n      if (action === 'rate') {\n        await paperManager.updateRating(sourceId, paperId, data.value);\n        logger.info(`Updated rating for ${sourceId}:${paperId} to ${data.value}`);\n      } \n      else if (action === 'saveNotes') {\n        if (data.value) {\n          await paperManager.logAnnotation(sourceId, paperId, 'notes', data.value);\n          logger.info(`Saved notes for ${sourceId}:${paperId}`);\n        }\n      }\n    } catch (error) {\n      logger.error(`Error handling action ${action} for ${sourceId}:${paperId}`, error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Create HTML for paper popup\n   */\n  private createPopupHtml(paper: PaperMetadata): string {\n    return `\n      <div class=\"paper-popup-header\">${paper.title || paper.paperId}</div>\n      <div class=\"paper-popup-meta\">${paper.authors || ''}</div>\n      \n      <div class=\"paper-popup-buttons\">\n        <button class=\"vote-button\" data-vote=\"thumbsup\" id=\"btn-thumbsup\" ${paper.rating === 'thumbsup' ? 'class=\"active\"' : ''}>üëç Interesting</button>\n        <button class=\"vote-button\" data-vote=\"thumbsdown\" id=\"btn-thumbsdown\" ${paper.rating === 'thumbsdown' ? 'class=\"active\"' : ''}>üëé Not Relevant</button>\n      </div>\n      \n      <textarea placeholder=\"Add notes about this paper...\" id=\"paper-notes\"></textarea>\n      \n      <div class=\"paper-popup-actions\">\n        <button class=\"save-button\" id=\"btn-save\">Save</button>\n      </div>\n    `;\n  }\n  \n  /**\n   * Get standard popup event handlers\n   */\n  private getStandardPopupHandlers(): PopupHandler[] {\n    return [\n      { selector: '#btn-thumbsup', event: 'click', action: 'rate' },\n      { selector: '#btn-thumbsdown', event: 'click', action: 'rate' },\n      { selector: '#btn-save', event: 'click', action: 'saveNotes' }\n    ];\n  }\n}\n","// extension/source-integration/source-manager.ts\n// Updated SourceIntegrationManager to use source-specific identifier formatting\n\nimport { SourceIntegration, SourceManager } from './types';\nimport { loguru } from '../utils/logger';\n\nconst logger = loguru.getLogger('source-manager');\n\n/**\n * Manages source integrations\n */\nexport class SourceIntegrationManager implements SourceManager {\n  private sources: Map<string, SourceIntegration> = new Map();\n  \n  constructor() {\n    logger.info('Source integration manager initialized');\n  }\n  \n  /**\n   * Register a source integration\n   */\n  registerSource(source: SourceIntegration): void {\n    if (this.sources.has(source.id)) {\n      logger.warning(`Source with ID '${source.id}' already registered, overwriting`);\n    }\n    \n    this.sources.set(source.id, source);\n    logger.info(`Registered source: ${source.name} (${source.id})`);\n  }\n  \n  /**\n   * Get all registered sources\n   */\n  getAllSources(): SourceIntegration[] {\n    return Array.from(this.sources.values());\n  }\n  \n  /**\n   * Get source that can handle a URL\n   */\n  getSourceForUrl(url: string): SourceIntegration | null {\n    for (const source of this.sources.values()) {\n      if (source.canHandleUrl(url)) {\n        logger.debug(`Found source for URL '${url}': ${source.id}`);\n        return source;\n      }\n    }\n    \n    logger.debug(`No source found for URL: ${url}`);\n    return null;\n  }\n  \n  /**\n   * Get source by ID\n   */\n  getSourceById(sourceId: string): SourceIntegration | null {\n    const source = this.sources.get(sourceId);\n    return source || null;\n  }\n  \n  /**\n   * Extract paper ID from URL using appropriate source\n   */\n  extractPaperId(url: string): { sourceId: string, paperId: string } | null {\n    for (const source of this.sources.values()) {\n      if (source.canHandleUrl(url)) {\n        const paperId = source.extractPaperId(url);\n        if (paperId) {\n          logger.debug(`Extracted paper ID '${paperId}' from URL using ${source.id}`);\n          return { sourceId: source.id, paperId };\n        }\n      }\n    }\n    \n    logger.debug(`Could not extract paper ID from URL: ${url}`);\n    return null;\n  }\n  \n  /**\n   * Format a paper identifier using the appropriate source\n   */\n  formatPaperId(sourceId: string, paperId: string): string {\n    const source = this.sources.get(sourceId);\n    \n    if (source) {\n      return source.formatPaperId(paperId);\n    }\n    \n    // Fallback if source not found\n    logger.warning(`Source '${sourceId}' not found, using default format for paper ID`);\n    return `${sourceId}.${paperId}`;\n  }\n  \n  /**\n   * Format an object ID using the appropriate source\n   */\n  formatObjectId(type: string, sourceId: string, paperId: string): string {\n    const source = this.sources.get(sourceId);\n    \n    if (source) {\n      return source.formatObjectId(type, paperId);\n    }\n    \n    // Fallback if source not found\n    logger.warning(`Source '${sourceId}' not found, using default format for object ID`);\n    return `${type}:${sourceId}.${paperId}`;\n  }\n  \n  /**\n   * Get all content script match patterns\n   */\n  getAllContentScriptMatches(): string[] {\n    const patterns: string[] = [];\n    \n    for (const source of this.sources.values()) {\n      patterns.push(...source.contentScriptMatches);\n    }\n    \n    return patterns;\n  }\n}\n","// extension/source-integration/metadata-extractor.ts\n// Object-oriented metadata extraction system with customizable extraction methods\n\nimport { loguru } from '../utils/logger';\n\nconst logger = loguru.getLogger('metadata-extractor');\n\nexport interface ExtractedMetadata {\n  title: string;\n  authors: string;\n  description: string;\n  publishedDate: string;\n  doi?: string;\n  journalName?: string;\n  tags?: string[];\n  url?: string;\n}\n\n// Constants for standard source types\nexport const SOURCE_TYPES = {\n  PDF: 'pdf',\n  URL: 'url',\n} as const;\n\nexport type SourceType = typeof SOURCE_TYPES[keyof typeof SOURCE_TYPES];\n\n/**\n * Base class for metadata extraction with customizable extraction methods\n * Each method can be overridden to provide source-specific extraction\n */\nexport class MetadataExtractor {\n  protected document: Document;\n  protected url: string;\n  \n  /**\n   * Create a new metadata extractor for a document\n   */\n  constructor(document: Document) {\n    this.document = document;\n    this.url = document.location.href;\n    logger.debug('Initialized metadata extractor for:', this.url);\n  }\n  \n  /**\n   * Helper method to get content from meta tags\n   */\n  protected getMetaContent(selector: string): string {\n    const element = this.document.querySelector(selector);\n    return element ? element.getAttribute('content') || '' : '';\n  }\n  \n  /**\n   * Extract and return all metadata fields\n   */\n  public extract(): ExtractedMetadata {\n    logger.debug('Extracting metadata from page:', this.url);\n    \n    const metadata: ExtractedMetadata = {\n      title: this.extractTitle(),\n      authors: this.extractAuthors(),\n      description: this.extractDescription(),\n      publishedDate: this.extractPublishedDate(),\n      doi: this.extractDoi(),\n      journalName: this.extractJournalName(),\n      tags: this.extractTags(),\n      url: this.url\n    };\n    \n    logger.debug('Metadata extraction complete:', metadata);\n    return metadata;\n  }\n  \n  /**\n   * Extract title from document\n   * Considers multiple metadata standards with priority order, then DOM fallbacks\n   */\n  protected extractTitle(): string {\n    // Title extraction from meta tags - priority order\n    const metaTitle = (\n      // Dublin Core\n      this.getMetaContent('meta[name=\"DC.Title\"]') || this.getMetaContent('meta[name=\"dc.title\"]') ||\n      // Citation\n      this.getMetaContent('meta[name=\"citation_title\"]') ||\n      // Open Graph\n      this.getMetaContent('meta[property=\"og:title\"]') ||\n      // Standard meta\n      this.getMetaContent('meta[name=\"title\"]')\n    );\n\n    if (metaTitle) {\n      return metaTitle;\n    }\n\n    // DOM-based fallback extraction\n    // Look for common paper title patterns in the page\n    const titleSelectors = [\n      // Common academic page patterns\n      'h1.title', 'h1.article-title', 'h1.paper-title', 'h1.document-title',\n      '.title h1', '.article-title h1', '.paper-title h1',\n      'h1[itemprop=\"headline\"]', 'h1[itemprop=\"name\"]',\n      '.citation_title', '.paper-title', '.article-title',\n      // Generic heading patterns\n      'article h1', 'main h1', '.content h1', '#content h1',\n      // PDF viewer fallbacks\n      '.page-title', '#title',\n      // First h1 on the page as last resort before document.title\n      'h1'\n    ];\n\n    for (const selector of titleSelectors) {\n      const element = this.document.querySelector(selector);\n      if (element) {\n        const text = element.textContent?.trim();\n        // Only use if it looks like a real title (not too short, not navigation)\n        if (text && text.length > 5 && text.length < 500) {\n          return text;\n        }\n      }\n    }\n\n    // Fallback to document title\n    return this.document.title;\n  }\n  \n  /**\n   * Extract authors from document\n   * Handles multiple author formats and sources with DOM fallbacks\n   */\n  protected extractAuthors(): string {\n    // Get all citation authors (some pages have multiple citation_author tags)\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    // Get all DC creators\n    const dcCreators: string[] = [];\n    this.document.querySelectorAll('meta[name=\"DC.Creator.PersonalName\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) dcCreators.push(content);\n    });\n\n    // Individual author elements\n    const dcCreator = this.getMetaContent('meta[name=\"DC.Creator.PersonalName\"]') || this.getMetaContent('meta[name=\"dc.creator.personalname\"]');\n    const citationAuthor = this.getMetaContent('meta[name=\"citation_author\"]');\n    const ogAuthor = this.getMetaContent('meta[property=\"og:article:author\"]') ||\n                    this.getMetaContent('meta[name=\"author\"]');\n\n    // Set authors with priority from meta tags\n    if (dcCreators.length > 0) {\n      return dcCreators.join(', ');\n    } else if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    } else if (dcCreator) {\n      return dcCreator;\n    } else if (citationAuthor) {\n      return citationAuthor;\n    } else if (ogAuthor) {\n      return ogAuthor;\n    }\n\n    // DOM-based fallback extraction\n    const authorSelectors = [\n      // Common academic page patterns\n      '.authors a', '.author a', '.author-name a',\n      '.authors', '.author', '.author-name', '.author-list',\n      '[itemprop=\"author\"]', '[rel=\"author\"]',\n      '.byline', '.by-line', '.article-author', '.paper-author',\n      '.contributor', '.contributors',\n      // arXiv-like patterns\n      '.authors', '.authors-list',\n      // IEEE/ACM patterns\n      '.authors-info .author span', '.author-info',\n      // Nature/Science patterns\n      '.c-article-author-list', '.article-authors',\n      // Generic patterns\n      '.meta-authors', '#authors', '.author-block'\n    ];\n\n    for (const selector of authorSelectors) {\n      const elements = this.document.querySelectorAll(selector);\n      if (elements.length > 0) {\n        const authors: string[] = [];\n        elements.forEach(el => {\n          const text = el.textContent?.trim();\n          if (text && text.length > 1 && text.length < 200) {\n            // Clean up common prefixes\n            const cleaned = text\n              .replace(/^(by|authors?:?|written by)\\s*/i, '')\n              .replace(/\\s+/g, ' ')\n              .trim();\n            if (cleaned) {\n              authors.push(cleaned);\n            }\n          }\n        });\n        if (authors.length > 0) {\n          // If we got multiple elements, join them\n          // If we got one element that looks like a comma-separated list, return as-is\n          const result = authors.join(', ');\n          if (result.length > 2) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return '';\n  }\n  \n  /**\n   * Extract description/abstract from document with DOM fallbacks\n   */\n  protected extractDescription(): string {\n    // Try meta tags first\n    const metaDescription = (\n      this.getMetaContent('meta[name=\"DC.Description\"]') || this.getMetaContent('meta[name=\"dc.description\"]') ||\n      this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n      this.getMetaContent('meta[property=\"og:description\"]') ||\n      this.getMetaContent('meta[name=\"description\"]')\n    );\n\n    if (metaDescription && metaDescription.length > 50) {\n      return metaDescription;\n    }\n\n    // DOM-based fallback extraction for abstracts\n    const abstractSelectors = [\n      // Common academic patterns\n      '.abstract', '#abstract', '[id*=\"abstract\"]', '[class*=\"abstract\"]',\n      '.Abstract', '#Abstract',\n      // Specific patterns\n      '.abstractSection', '.abstract-content', '.abstract-text',\n      '.paper-abstract', '.article-abstract',\n      // arXiv patterns\n      'blockquote.abstract',\n      // Summary patterns (some sites use \"summary\" instead of \"abstract\")\n      '.summary', '#summary', '.article-summary',\n      // IEEE/ACM patterns\n      '.abstract-text', '.abstractInFull',\n      // Nature/Science patterns\n      '.c-article-section__content', '[data-component=\"article-abstract\"]',\n      // Schema.org patterns\n      '[itemprop=\"description\"]', '[itemprop=\"abstract\"]'\n    ];\n\n    for (const selector of abstractSelectors) {\n      const element = this.document.querySelector(selector);\n      if (element) {\n        let text = element.textContent?.trim() || '';\n        // Clean up the abstract\n        text = text\n          .replace(/^(abstract:?|summary:?)\\s*/i, '')\n          .replace(/\\s+/g, ' ')\n          .trim();\n        // Only use if it looks like a real abstract (not too short)\n        if (text.length > 100) {\n          return text;\n        }\n      }\n    }\n\n    // If we have a short meta description, return it as fallback\n    if (metaDescription) {\n      return metaDescription;\n    }\n\n    return '';\n  }\n  \n  /**\n   * Extract publication date from document with DOM fallbacks\n   */\n  protected extractPublishedDate(): string {\n    // Try meta tags first\n    const metaDate = (\n      this.getMetaContent('meta[name=\"DC.Date.issued\"]') || this.getMetaContent('meta[name=\"dc.date.issued\"]') ||\n      this.getMetaContent('meta[name=\"dc.date\"]') || this.getMetaContent('meta[name=\"dc.Date\"]') ||\n      this.getMetaContent('meta[name=\"DC.Date\"]') ||\n      this.getMetaContent('meta[name=\"citation_date\"]') ||\n      this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n      this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n      this.getMetaContent('meta[property=\"article:published_time\"]') ||\n      this.getMetaContent('meta[property=\"article:modified_time\"]')\n    );\n\n    if (metaDate) {\n      return metaDate;\n    }\n\n    // DOM-based fallback extraction\n    const dateSelectors = [\n      // Common patterns\n      '.date', '.pub-date', '.publication-date', '.published-date',\n      '.article-date', '.paper-date', '.dateline',\n      '[itemprop=\"datePublished\"]', '[itemprop=\"dateCreated\"]',\n      'time[datetime]', 'time[pubdate]',\n      // arXiv patterns\n      '.dateline', '.submission-history',\n      // Specific patterns\n      '.meta-date', '.entry-date', '.post-date'\n    ];\n\n    for (const selector of dateSelectors) {\n      const element = this.document.querySelector(selector);\n      if (element) {\n        // Check for datetime attribute first (more reliable)\n        const datetime = element.getAttribute('datetime') || element.getAttribute('content');\n        if (datetime) {\n          return datetime;\n        }\n        // Fall back to text content\n        const text = element.textContent?.trim();\n        if (text && this.looksLikeDate(text)) {\n          return text;\n        }\n      }\n    }\n\n    return '';\n  }\n\n  /**\n   * Check if a string looks like a date\n   */\n  protected looksLikeDate(text: string): boolean {\n    // Common date patterns\n    const datePatterns = [\n      /\\d{4}-\\d{2}-\\d{2}/, // ISO format\n      /\\d{1,2}\\/\\d{1,2}\\/\\d{2,4}/, // US format\n      /\\d{1,2}\\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i, // Month name\n      /(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s+\\d{1,2}/i, // Month name\n      /(January|February|March|April|May|June|July|August|September|October|November|December)/i,\n      /\\d{4}/ // Just a year\n    ];\n    return datePatterns.some(pattern => pattern.test(text));\n  }\n  \n  /**\n   * Extract DOI (Digital Object Identifier) from document with URL and DOM fallbacks\n   */\n  protected extractDoi(): string {\n    // Try meta tags first\n    const metaDoi = (\n      this.getMetaContent('meta[name=\"DC.Identifier.DOI\"]') || this.getMetaContent('meta[name=\"dc.identifier.doi\"]') ||\n      this.getMetaContent('meta[name=\"citation_doi\"]') ||\n      this.getMetaContent('meta[name=\"DOI\"]') || this.getMetaContent('meta[name=\"doi\"]')\n    );\n\n    if (metaDoi) {\n      return metaDoi;\n    }\n\n    // Try to extract DOI from URL\n    const doiFromUrl = this.extractDoiFromUrl(this.url);\n    if (doiFromUrl) {\n      return doiFromUrl;\n    }\n\n    // DOM-based fallback - look for DOI links or text\n    const doiSelectors = [\n      'a[href*=\"doi.org/10.\"]',\n      'a[href*=\"/doi/10.\"]',\n      '.doi', '#doi', '[class*=\"doi\"]'\n    ];\n\n    for (const selector of doiSelectors) {\n      const element = this.document.querySelector(selector);\n      if (element) {\n        // Check href for DOI\n        const href = element.getAttribute('href');\n        if (href) {\n          const doi = this.extractDoiFromUrl(href);\n          if (doi) return doi;\n        }\n        // Check text content\n        const text = element.textContent?.trim();\n        if (text) {\n          const doiMatch = text.match(/10\\.\\d{4,}\\/[^\\s]+/);\n          if (doiMatch) {\n            return doiMatch[0];\n          }\n        }\n      }\n    }\n\n    return '';\n  }\n\n  /**\n   * Extract DOI from a URL\n   */\n  protected extractDoiFromUrl(url: string): string {\n    // Common DOI URL patterns\n    const doiPatterns = [\n      /doi\\.org\\/(10\\.\\d{4,}\\/[^\\s?#]+)/i,\n      /\\/doi\\/(?:abs|full|pdf|epdf)?\\/?((10\\.\\d{4,}\\/[^\\s?#]+))/i,\n      /doi[=:](10\\.\\d{4,}\\/[^\\s&?#]+)/i\n    ];\n\n    for (const pattern of doiPatterns) {\n      const match = url.match(pattern);\n      if (match) {\n        return match[1] || match[2];\n      }\n    }\n\n    return '';\n  }\n  \n  /**\n   * Extract journal name from document\n   */\n  protected extractJournalName(): string {\n    return (\n      this.getMetaContent('meta[name=\"DC.Source\"]') || this.getMetaContent('meta[name=\"dc.source\"]') ||\n      this.getMetaContent('meta[name=\"citation_journal_title\"]')\n    );\n  }\n  \n  /**\n   * Extract keywords/tags from document\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"keywords\"]') ||\n                    this.getMetaContent('meta[name=\"DC.Subject\"]') || this.getMetaContent('meta[name=\"dc.subject\"]');\n    \n    if (keywords) {\n      return keywords.split(',').map(tag => tag.trim());\n    }\n    \n    return [];\n  }\n  \n  /**\n   * Determine if the current URL is a PDF\n   */\n  public isPdf(): boolean {\n    return isPdfUrl(this.url);\n  }\n  \n  /**\n   * Get the source type (PDF or URL)\n   */\n  public getSourceType(): SourceType {\n    return this.isPdf() ? SOURCE_TYPES.PDF : SOURCE_TYPES.URL;\n  }\n  \n  /**\n   * Generate a paper ID for the current URL\n   */\n  public generatePaperId(): string {\n    return generatePaperIdFromUrl(this.url);\n  }\n}\n\n/**\n * Create a common metadata extractor for a document\n * Factory function for creating the default extractor\n */\nexport function createMetadataExtractor(document: Document): MetadataExtractor {\n  return new MetadataExtractor(document);\n}\n\n/**\n * Extract common metadata from a document\n * Convenience function for quick extraction\n */\nexport function extractCommonMetadata(document: Document): ExtractedMetadata {\n  return createMetadataExtractor(document).extract();\n}\n\n/**\n * Generate a paper ID from a URL\n * Creates a consistent hash-based identifier\n */\nexport function generatePaperIdFromUrl(url: string): string {\n  // Use a basic hash function to create an ID from the URL\n  let hash = 0;\n  for (let i = 0; i < url.length; i++) {\n    const char = url.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  \n  // Create a positive hexadecimal string\n  const positiveHash = Math.abs(hash).toString(16).toUpperCase();\n  \n  // Use the first 8 characters as the ID\n  return positiveHash.substring(0, 8);\n}\n\n/**\n * Determine if a URL is a PDF\n */\nexport function isPdfUrl(url: string): boolean {\n  return url.toLowerCase().endsWith('.pdf');\n}\n","// extension/source-integration/base-source.ts\n// Base class for source integrations with default identifier formatting\n// and metadata extraction capability\n\nimport { SourceIntegration } from './types';\nimport { PaperMetadata } from '../papers/types';\nimport { loguru } from '../utils/logger';\nimport { \n  MetadataExtractor, \n  createMetadataExtractor,\n  generatePaperIdFromUrl\n} from './metadata-extractor';\n\nconst logger = loguru.getLogger('base-source');\n\n/**\n * Base class for source integrations\n * Provides default implementations for all methods\n * Specific sources can override as needed\n */\nexport class BaseSourceIntegration implements SourceIntegration {\n  // Default properties - set for generic web pages\n  readonly id: string = 'url';\n  readonly name: string = 'Web Page';\n  readonly urlPatterns: RegExp[] = [\n    /^https?:\\/\\/(?!.*\\.pdf($|\\?|#)).*$/i  // Match HTTP/HTTPS URLs that aren't PDFs\n  ];\n  readonly contentScriptMatches: string[] = [];\n\n  /**\n   * Check if this integration can handle the given URL\n   * Default implementation checks against urlPatterns\n   */\n  canHandleUrl(url: string): boolean {\n    return this.urlPatterns.some(pattern => pattern.test(url));\n  }\n\n  /**\n   * Extract paper ID from URL\n   * Default implementation creates a hash from the URL\n   */\n  extractPaperId(url: string): string | null {\n    return generatePaperIdFromUrl(url);\n  }\n  \n  /**\n   * Create a metadata extractor for the given document\n   * Override this method to provide a custom extractor for your source\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return createMetadataExtractor(document);\n  }\n  \n  /**\n   * Extract metadata from a page\n   * Default implementation uses common metadata extraction\n   */\n  async extractMetadata(document: Document, paperId: string): Promise<PaperMetadata | null> {\n    try {\n      logger.debug(`Extracting metadata using base extractor for ID: ${paperId}`);\n      \n      // Create a metadata extractor for this document\n      const extractor = this.createMetadataExtractor(document);\n      \n      // Extract metadata\n      const extracted = extractor.extract();\n      const url = document.location.href;\n      \n      // Determine source type (PDF or URL)\n      const sourceType = extractor.getSourceType();\n      \n      // Create PaperMetadata object\n      return {\n        sourceId: this.id,\n        //paperId: this.formatPaperId(paperId),\n        paperId: paperId,\n        url: url,\n        title: extracted.title || document.title || paperId,\n        authors: extracted.authors || '',\n        abstract: extracted.description || '',\n        timestamp: new Date().toISOString(),\n        rating: 'novote',\n        publishedDate: extracted.publishedDate || '',\n        tags: extracted.tags || [],\n        doi: extracted.doi,\n        journalName: extracted.journalName,\n        sourceType: sourceType // Store the source type for reference\n      };\n    } catch (error) {\n      logger.error('Error extracting metadata with base extractor', error);\n      return null;\n    }\n  }\n  \n  /**\n   * Format a paper identifier for this source\n   * Default implementation uses the format: sourceId.paperId\n   */\n  formatPaperId(paperId: string): string {\n    return `${this.id}.${paperId}`;\n  }\n  \n  /**\n   * Parse a paper identifier specific to this source\n   * Default implementation handles source.paperId format and extracts paperId\n   */\n  parsePaperId(identifier: string): string | null {\n    const prefix = `${this.id}.`;\n    \n    if (identifier.startsWith(prefix)) {\n      return identifier.substring(prefix.length);\n    }\n    \n    // Try legacy format (sourceId:paperId)\n    const legacyPrefix = `${this.id}:`;\n    if (identifier.startsWith(legacyPrefix)) {\n      logger.debug(`Parsed legacy format identifier: ${identifier}`);\n      return identifier.substring(legacyPrefix.length);\n    }\n    \n    return null;\n  }\n  \n  /**\n   * Format a storage object ID for this source\n   * Default implementation uses the format: type:sourceId.paperId\n   */\n  formatObjectId(type: string, paperId: string): string {\n    return `${type}:${this.formatPaperId(paperId)}`;\n  }\n}\n","// extension/source-integration/arxiv/index.ts\n// ArXiv integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { PaperMetadata } from '../../papers/types';\nimport { MetadataExtractor, ExtractedMetadata } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('arxiv-integration');\n\n/**\n * Custom metadata extractor for arXiv pages\n */\nclass ArxivMetadataExtractor extends MetadataExtractor {\n  private apiMetadata?: Partial<ExtractedMetadata>;\n  \n  constructor(document: Document, apiMetadata?: Partial<ExtractedMetadata>) {\n    super(document);\n    this.apiMetadata = apiMetadata;\n  }\n  \n  /**\n   * Override title extraction to use API data if available\n   */\n  protected extractTitle(): string {\n    if (this.apiMetadata?.title) {\n      return this.apiMetadata.title;\n    }\n    \n    return super.extractTitle();\n  }\n  \n  /**\n   * Override authors extraction to use API data if available\n   */\n  protected extractAuthors(): string {\n    if (this.apiMetadata?.authors) {\n      return this.apiMetadata.authors;\n    }\n    \n    // arXiv-specific selectors\n    const authorLinks = this.document.querySelectorAll('.authors a');\n    if (authorLinks.length > 0) {\n      return Array.from(authorLinks)\n        .map(link => link.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n    }\n    \n    return super.extractAuthors();\n  }\n  \n  /**\n   * Override description extraction to use API data if available\n   */\n  protected extractDescription(): string {\n    if (this.apiMetadata?.description) {\n      return this.apiMetadata.description;\n    }\n    \n    // arXiv-specific selectors\n    const abstract = this.document.querySelector('.abstract')?.textContent?.trim();\n    if (abstract) {\n      // Remove \"Abstract:\" prefix if present\n      return abstract.replace(/^Abstract:\\s*/i, '');\n    }\n    \n    return super.extractDescription();\n  }\n  \n  /**\n   * Override published date extraction to use API data if available\n   */\n  protected extractPublishedDate(): string {\n    if (this.apiMetadata?.publishedDate) {\n      return this.apiMetadata.publishedDate;\n    }\n    \n    // arXiv-specific date extraction\n    const datelineElement = this.document.querySelector('.dateline');\n    if (datelineElement) {\n      const dateText = datelineElement.textContent;\n      const dateMatch = dateText?.match(/\\(Submitted on ([^)]+)\\)/);\n      if (dateMatch) {\n        return dateMatch[1];\n      }\n    }\n    \n    return super.extractPublishedDate();\n  }\n  \n  /**\n   * Override DOI extraction to use API data if available\n   */\n  protected extractDoi(): string {\n    return this.apiMetadata?.doi || super.extractDoi();\n  }\n  \n  /**\n   * Override journal extraction to use API data if available\n   */\n  protected extractJournalName(): string {\n    return this.apiMetadata?.journalName || super.extractJournalName();\n  }\n  \n  /**\n   * Override tags extraction to use API data if available\n   */\n  protected extractTags(): string[] {\n    if (this.apiMetadata?.tags) {\n      return this.apiMetadata.tags;\n    }\n    \n    // arXiv-specific category extraction\n    const subjects = this.document.querySelector('.subjects')?.textContent?.trim();\n    if (subjects) {\n      return subjects.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n    \n    return super.extractTags();\n  }\n}\n\n/**\n * ArXiv integration with custom metadata extraction\n */\nexport class ArXivIntegration extends BaseSourceIntegration {\n  readonly id = 'arxiv';\n  readonly name = 'arXiv.org';\n  \n  // URL patterns for papers\n  readonly urlPatterns = [\n    /arxiv\\.org\\/(abs|pdf|html)\\/([0-9.]+)/,\n    /arxiv\\.org\\/\\w+\\/([0-9.]+)/\n  ];\n  \n  // Content script matches\n  // readonly contentScriptMatches = [\n  //   \"*://*.arxiv.org/*\"\n  // ];\n\n  // ArXiv API endpoint\n  private readonly API_BASE_URL = 'https://export.arxiv.org/api/query';\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    for (const pattern of this.urlPatterns) {\n      const match = url.match(pattern);\n      if (match) {\n        return match[2] || match[1]; // The capture group with the paper ID\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Create a custom metadata extractor for arXiv\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new ArxivMetadataExtractor(document);\n  }\n\n  /**\n   * Fetch metadata from ArXiv API\n   */\n  private async fetchFromApi(paperId: string): Promise<Partial<ExtractedMetadata> | null> {\n    try {\n      const apiUrl = `${this.API_BASE_URL}?id_list=${paperId}`;\n      logger.debug(`Fetching from ArXiv API: ${apiUrl}`);\n      \n      const response = await fetch(apiUrl);\n      if (!response.ok) {\n        logger.error(`ArXiv API request failed with status: ${response.status}`);\n        return null;\n      }\n      \n      const xmlText = await response.text();\n      \n      // Parse XML to JSON\n      const parser = new DOMParser();\n      const xmlDoc = parser.parseFromString(xmlText, 'text/xml');\n      \n      // Convert XML to a more manageable format\n      const entry = xmlDoc.querySelector('entry');\n      if (!entry) {\n        logger.warn('No entry found in ArXiv API response');\n        return null;\n      }\n      \n      // Extract metadata from XML\n      const title = entry.querySelector('title')?.textContent?.trim() || '';\n      const summary = entry.querySelector('summary')?.textContent?.trim() || '';\n      const published = entry.querySelector('published')?.textContent?.trim() || '';\n      \n      // Extract authors\n      const authorElements = entry.querySelectorAll('author name');\n      const authors = Array.from(authorElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n      \n      // Extract DOI if available\n      const doi = entry.querySelector('arxiv\\\\:doi, doi')?.textContent?.trim();\n      \n      // Extract journal reference if available\n      const journalRef = entry.querySelector('arxiv\\\\:journal_ref, journal_ref')?.textContent?.trim();\n      \n      // Extract categories\n      const categoryElements = entry.querySelectorAll('category');\n      const categories = Array.from(categoryElements)\n        .map(el => el.getAttribute('term'))\n        .filter(Boolean) as string[];\n      \n      return {\n        title,\n        authors,\n        description: summary,\n        publishedDate: published,\n        doi,\n        journalName: journalRef,\n        tags: categories\n      };\n      \n    } catch (error) {\n      logger.error('Error fetching from ArXiv API', error);\n      return null;\n    }\n  }\n\n  /**\n   * Extract metadata from page or fetch from API\n   * Override parent method to handle the API fallback\n   */\n  async extractMetadata(document: Document, paperId: string): Promise<PaperMetadata | null> {\n    try {\n      logger.info(`Extracting metadata for arXiv ID: ${paperId}`);\n      \n      // Try to extract from page first\n      const extractor = this.createMetadataExtractor(document);\n      const pageMetadata = extractor.extract();\n      \n      // Check if we have the essential fields\n      const hasTitle = pageMetadata.title && pageMetadata.title !== document.title;\n      const hasAuthors = pageMetadata.authors && pageMetadata.authors.length > 0;\n      const hasAbstract = pageMetadata.description && pageMetadata.description.length > 0;\n      \n      if (hasTitle && hasAuthors && hasAbstract) {\n        logger.debug('Successfully extracted complete metadata from page');\n        return this.convertToPageMetadata(pageMetadata, paperId, extractor.getSourceType());\n      }\n      \n      // If page extraction is incomplete, fetch from API\n      logger.info('Page metadata incomplete, fetching from ArXiv API');\n      const apiMetadata = await this.fetchFromApi(paperId);\n      \n      if (!apiMetadata) {\n        logger.warn('Failed to fetch metadata from ArXiv API, using partial page data');\n        return this.convertToPageMetadata(pageMetadata, paperId, extractor.getSourceType());\n      }\n      \n      // Create a new extractor with API data\n      const enhancedExtractor = new ArxivMetadataExtractor(document, apiMetadata);\n      const mergedMetadata = enhancedExtractor.extract();\n      \n      logger.debug('Merged metadata from page and API', mergedMetadata);\n      return this.convertToPageMetadata(mergedMetadata, paperId, enhancedExtractor.getSourceType());\n      \n    } catch (error) {\n      logger.error('Error extracting metadata for arXiv', error);\n      return null;\n    }\n  }\n\n  /**\n   * Convert ExtractedMetadata to PaperMetadata\n   */\n  private convertToPageMetadata(extracted: ExtractedMetadata, paperId: string, sourceType: string): PaperMetadata {\n    return {\n      sourceId: this.id,\n      paperId: paperId,\n      url: extracted.url || '',\n      title: extracted.title,\n      authors: extracted.authors,\n      abstract: extracted.description,\n      timestamp: new Date().toISOString(),\n      rating: 'novote',\n      publishedDate: extracted.publishedDate,\n      tags: extracted.tags || [],\n      doi: extracted.doi,\n      journalName: extracted.journalName,\n      sourceType: sourceType\n    };\n  }\n}\n\n// Export a singleton instance that can be used by both background and content scripts\nexport const arxivIntegration = new ArXivIntegration();\n","// extension/source-integration/openreview/index.ts\n// OpenReview integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { PaperMetadata } from '../../papers/types';\nimport { MetadataExtractor, createMetadataExtractor, ExtractedMetadata } from '..//metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('openreview-integration');\n\n/**\n * Custom metadata extractor for OpenReview pages\n */\nclass OpenReviewMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract metadata from OpenReview pages\n   */\n  public extract(): ExtractedMetadata {\n    // First try to extract using standard methods\n    const baseMetadata = super.extract();\n    \n    try {\n      // Get title from OpenReview-specific elements\n      const title = this.document.querySelector('.citation_title')?.textContent || \n                   this.document.querySelector('.forum-title h2')?.textContent;\n      \n      // Get authors\n      const authorElements = Array.from(this.document.querySelectorAll('.forum-authors a'));\n      const authors = authorElements\n        .map(el => el.textContent)\n        .filter(Boolean)\n        .join(', ');\n      \n      // Get abstract\n      const abstract = this.document.querySelector('meta[name=\"citation_abstract\"]')?.getAttribute('content') ||\n                     Array.from(this.document.querySelectorAll('.note-content-field'))\n                       .find(el => el.textContent?.includes('Abstract'))\n                       ?.nextElementSibling?.textContent;\n      \n      // Get publication date\n      const dateText = this.document.querySelector('.date.item')?.textContent;\n      let publishedDate = '';\n      if (dateText) {\n        const dateMatch = dateText.match(/Published: ([^,]+)/);\n        if (dateMatch) {\n          publishedDate = dateMatch[1];\n        }\n      }\n      \n      // Get DOI if available\n      const doi = this.document.querySelector('meta[name=\"citation_doi\"]')?.getAttribute('content') || '';\n      \n      // Get conference/journal name\n      const venueElements = this.document.querySelectorAll('.forum-meta .item');\n      let venue = '';\n      for (let i = 0; i < venueElements.length; i++) {\n        const el = venueElements[i];\n        if (el.querySelector('.glyphicon-folder-open')) {\n          venue = el.textContent?.trim() || '';\n          break;\n        }\n      }\n      \n      // Get tags/keywords\n      const keywordsElement = Array.from(this.document.querySelectorAll('.note-content-field'))\n        .find(el => el.textContent?.includes('Keywords'));\n      let tags: string[] = [];\n      if (keywordsElement) {\n        const keywordsValue = keywordsElement.nextElementSibling?.textContent;\n        if (keywordsValue) {\n          tags = keywordsValue.split(',').map(tag => tag.trim());\n        }\n      }\n      \n      return {\n        title: title || baseMetadata.title,\n        authors: authors || baseMetadata.authors,\n        description: abstract || baseMetadata.description,\n        publishedDate: publishedDate || baseMetadata.publishedDate,\n        doi: doi || baseMetadata.doi,\n        journalName: venue || baseMetadata.journalName,\n        tags: tags.length ? tags : baseMetadata.tags,\n        url: this.url\n      };\n    } catch (error) {\n      logger.error('Error during OpenReview-specific extraction', error);\n      return baseMetadata;\n    }\n  }\n}\n\n/**\n * OpenReview integration with custom metadata extraction\n */\nexport class OpenReviewIntegration extends BaseSourceIntegration {\n  readonly id = 'openreview';\n  readonly name = 'OpenReview';\n  \n  // URL patterns for papers (various OpenReview formats)\n  readonly urlPatterns = [\n    // Forum page (main paper page)\n    /openreview\\.net\\/forum\\?id=([a-zA-Z0-9_-]+)/,\n    // PDF page\n    /openreview\\.net\\/pdf\\?id=([a-zA-Z0-9_-]+)/,\n    // Attachment URLs\n    /openreview\\.net\\/attachment\\?id=([a-zA-Z0-9_-]+)/,\n    // References/revisions\n    /openreview\\.net\\/references\\?referent=([a-zA-Z0-9_-]+)/,\n    /openreview\\.net\\/revisions\\?id=([a-zA-Z0-9_-]+)/,\n    // Group/venue pages (for browsing)\n    /openreview\\.net\\/group\\?id=([^&\\s]+)/,\n    // Generic OpenReview paper URL\n    /openreview\\.net\\/(?:forum|pdf)\\?id=/,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /openreview\\.net\\/(forum|pdf|attachment|references|revisions)\\?id=/.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract ID from various URL formats\n    const idMatch = url.match(/[?&]id=([a-zA-Z0-9_-]+)/);\n    if (idMatch) {\n      return idMatch[1];\n    }\n\n    // Try referent parameter\n    const referentMatch = url.match(/[?&]referent=([a-zA-Z0-9_-]+)/);\n    if (referentMatch) {\n      return referentMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create a custom metadata extractor for OpenReview\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new OpenReviewMetadataExtractor(document);\n  }\n\n  /**\n   * Extract metadata from page\n   * Override parent method to handle OpenReview-specific extraction\n   */\n  async extractMetadata(document: Document, paperId: string): Promise<PaperMetadata | null> {\n    logger.info(`Extracting metadata for OpenReview ID: ${paperId}`);\n    \n    // Extract metadata using our custom extractor\n    const metadata = await super.extractMetadata(document, paperId);\n    \n    if (metadata) {\n      // Add any OpenReview-specific metadata processing here\n      logger.debug('Extracted metadata from OpenReview page');\n      \n      // Check if we're on a PDF page and adjust metadata accordingly\n      if (document.location.href.includes('/pdf?id=')) {\n        metadata.sourceType = 'pdf';\n      }\n    }\n    \n    return metadata;\n  }\n}\n\n// Export a singleton instance that can be used by both background and content scripts\nexport const openReviewIntegration = new OpenReviewIntegration();\n","// extension/source-integration/nature/index.ts\n// Nature.com integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { PaperMetadata } from '../../papers/types';\nimport { MetadataExtractor, ExtractedMetadata } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('nature-integration');\n\n/**\n * Custom metadata extractor for Nature.com pages\n */\nclass NatureMetadataExtractor extends MetadataExtractor {\n  /**\n   * Override title extraction to use meta tag first\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') || \n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n  \n  /**\n   * Override authors extraction to use meta tag first\n   */\n  protected extractAuthors(): string {\n    const metaAuthors = this.getMetaContent('meta[name=\"citation_author\"]');\n    if (metaAuthors) {\n      return metaAuthors;\n    }\n    // Fallback to HTML extraction\n    const authorElements = this.document.querySelectorAll('.c-article-author-list__item');\n    if (authorElements.length > 0) {\n      return Array.from(authorElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n    }\n    return super.extractAuthors();\n  }\n  \n  /**\n   * Extract keywords/tags from document\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"dc.subject\"]');\n    \n    if (keywords) {\n      return keywords.split(',').map(tag => tag.trim());\n    }\n    \n    return [];\n  }\n  \n\n  /**\n   * Override description extraction to use meta tag first\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Override published date extraction to use meta tag\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') || super.extractPublishedDate();\n  }\n\n  /**\n   * Override DOI extraction to use meta tag\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n}\n\n/**\n * Nature.com integration with custom metadata extraction\n */\nexport class NatureIntegration extends BaseSourceIntegration {\n  readonly id = 'nature';\n  readonly name = 'Nature'; \n\n  // URL patterns for Nature articles (including all Nature journals)\n  readonly urlPatterns = [\n    // Main nature.com articles\n    /nature\\.com\\/articles\\/([^?#/]+)/,\n    // Nature sub-journals (e.g., nature.com/ncomms/articles/...)\n    /nature\\.com\\/\\w+\\/articles\\/([^?#/]+)/,\n    // Scientific Reports\n    /nature\\.com\\/srep\\/articles\\/([^?#/]+)/,\n    // Nature Communications\n    /nature\\.com\\/ncomms\\/articles\\/([^?#/]+)/,\n    // Nature Methods, Nature Reviews, etc.\n    /nature\\.com\\/n[a-z]+\\/articles\\/([^?#/]+)/,\n    // DOI-based URLs\n    /nature\\.com\\/doi\\/(10\\.\\d+\\/[^?#\\s]+)/,\n    // Full text and PDF variants\n    /nature\\.com\\/articles\\/([^?#/]+)\\.pdf/,\n    /nature\\.com\\/articles\\/([^?#/]+)\\/full/,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /nature\\.com\\/(articles|doi)\\//.test(url) ||\n           /nature\\.com\\/\\w+\\/articles\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract article ID\n    const articleMatch = url.match(/nature\\.com\\/(?:\\w+\\/)?articles\\/([^?#/]+)/);\n    if (articleMatch) {\n      return articleMatch[1].replace(/\\.pdf$/, '');\n    }\n\n    // Try DOI format\n    const doiMatch = url.match(/nature\\.com\\/doi\\/(10\\.\\d+\\/[^?#\\s]+)/);\n    if (doiMatch) {\n      return doiMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create a custom metadata extractor for Nature.com\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new NatureMetadataExtractor(document);\n  }\n}\n\n// Export a singleton instance \nexport const natureIntegration = new NatureIntegration();\n","// extension/source-integration/pnas/index.ts\nimport { BaseSourceIntegration } from '../base-source';\n\nexport class PnasIntegration extends BaseSourceIntegration {\n  readonly id = 'pnas';\n  readonly name = 'PNAS';\n\n  // URL patterns for PNAS articles\n  readonly urlPatterns = [\n    // DOI-based URLs (most common)\n    /pnas\\.org\\/doi\\/(10\\.1073\\/pnas\\.[0-9]+)/,\n    /pnas\\.org\\/doi\\/abs\\/(10\\.1073\\/pnas\\.[0-9]+)/,\n    /pnas\\.org\\/doi\\/full\\/(10\\.1073\\/pnas\\.[0-9]+)/,\n    /pnas\\.org\\/doi\\/pdf\\/(10\\.1073\\/pnas\\.[0-9]+)/,\n    /pnas\\.org\\/doi\\/epdf\\/(10\\.1073\\/pnas\\.[0-9]+)/,\n    // Alternate DOI formats\n    /pnas\\.org\\/doi\\/(10\\.1073\\/[^\\s?#]+)/,\n    // Content-based URLs (older format)\n    /pnas\\.org\\/content\\/(\\d+\\/\\d+\\/[^\\s?#]+)/,\n    /pnas\\.org\\/content\\/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/,\n    // Legacy cgi format\n    /pnas\\.org\\/cgi\\/doi\\/(10\\.1073\\/[^\\s?#]+)/,\n    // Generic PNAS DOI pattern\n    /pnas\\.org\\/doi\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /pnas\\.org\\/(doi|content|cgi)\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try DOI format\n    const doiMatch = url.match(/pnas\\.org\\/(?:doi\\/(?:abs|full|pdf|epdf)?\\/?)?(10\\.1073\\/[^\\s?#]+)/);\n    if (doiMatch) {\n      return doiMatch[1];\n    }\n\n    // Try content-based format\n    const contentMatch = url.match(/content\\/(\\d+\\/\\d+\\/[^\\s?#.]+)/);\n    if (contentMatch) {\n      return contentMatch[1];\n    }\n\n    // Try early format\n    const earlyMatch = url.match(/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/);\n    if (earlyMatch) {\n      return earlyMatch[1];\n    }\n\n    return null;\n  }\n}\n\nexport const pnasIntegration = new PnasIntegration();\n","// extension/source-integration/sciencedirect/index.ts\n// ScienceDirect integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('sciencedirect-integration');\n\n/**\n * Custom metadata extractor for ScienceDirect pages\n */\nclass ScienceDirectMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n\n  /**\n   * Extract journal name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') || super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * ScienceDirect integration for Elsevier journals\n */\nexport class ScienceDirectIntegration extends BaseSourceIntegration {\n  readonly id = 'sciencedirect';\n  readonly name = 'ScienceDirect';\n\n  // URL patterns for ScienceDirect articles\n  readonly urlPatterns = [\n    // PII-based URLs (most common)\n    /sciencedirect\\.com\\/science\\/article\\/pii\\/([A-Z0-9]+)/i,\n    /sciencedirect\\.com\\/science\\/article\\/abs\\/pii\\/([A-Z0-9]+)/i,\n    // Book chapters\n    /sciencedirect\\.com\\/science\\/book\\/([A-Z0-9]+)/i,\n    // DOI-based URLs\n    /sciencedirect\\.com\\/science\\/article\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/i,\n    // Generic article URLs\n    /sciencedirect\\.com\\/science\\/article\\//,\n    // PDF direct links\n    /sciencedirect\\.com\\/\\S+\\.pdf/i,\n    // Reader view\n    /reader\\.elsevier\\.com\\/reader\\/sd\\/pii\\/([A-Z0-9]+)/i,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /sciencedirect\\.com\\/science\\/article\\//.test(url) ||\n           /sciencedirect\\.com\\/science\\/book\\//.test(url) ||\n           /reader\\.elsevier\\.com\\/reader\\/sd\\/pii\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (PII) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try PII format (most common)\n    const piiMatch = url.match(/pii\\/([A-Z0-9]+)/i);\n    if (piiMatch) {\n      return piiMatch[1];\n    }\n\n    // Try DOI format\n    const doiMatch = url.match(/doi\\/(10\\.\\d+\\/[^\\s?#]+)/i);\n    if (doiMatch) {\n      return doiMatch[1];\n    }\n\n    // Try book format\n    const bookMatch = url.match(/book\\/([A-Z0-9]+)/i);\n    if (bookMatch) {\n      return bookMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for ScienceDirect\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new ScienceDirectMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const scienceDirectIntegration = new ScienceDirectIntegration();\n","// extension/source-integration/springer/index.ts\n// Springer integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('springer-integration');\n\n/**\n * Custom metadata extractor for Springer pages\n */\nclass SpringerMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"dc.title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    // Fallback to DC creator\n    const dcCreators: string[] = [];\n    this.document.querySelectorAll('meta[name=\"dc.creator\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) dcCreators.push(content);\n    });\n\n    if (dcCreators.length > 0) {\n      return dcCreators.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"dc.description\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           this.getMetaContent('meta[name=\"dc.date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"dc.identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           this.getMetaContent('meta[name=\"prism.publicationName\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * Springer integration for Springer Link articles\n */\nexport class SpringerIntegration extends BaseSourceIntegration {\n  readonly id = 'springer';\n  readonly name = 'Springer';\n\n  // URL patterns for Springer articles and chapters\n  readonly urlPatterns = [\n    // Articles with DOI\n    /link\\.springer\\.com\\/article\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Book chapters with DOI\n    /link\\.springer\\.com\\/chapter\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Books\n    /link\\.springer\\.com\\/book\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Conference papers\n    /link\\.springer\\.com\\/content\\/pdf\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Proceedings\n    /link\\.springer\\.com\\/proceeding\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Reference work entries\n    /link\\.springer\\.com\\/referenceworkentry\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // PDF variants\n    /link\\.springer\\.com\\/content\\/pdf\\/(10\\.\\d+%2F[^\\s?#]+)/,\n    // EPUB variants\n    /link\\.springer\\.com\\/epub\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Generic patterns for matching\n    /link\\.springer\\.com\\/article\\//,\n    /link\\.springer\\.com\\/chapter\\//,\n    /link\\.springer\\.com\\/book\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /link\\.springer\\.com\\/(article|chapter|book|content|proceeding|referenceworkentry|epub)\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract DOI from URL path\n    const doiMatch = url.match(/link\\.springer\\.com\\/(?:article|chapter|book|content\\/pdf|proceeding|referenceworkentry|epub)\\/(10\\.\\d+[/%][^\\s?#]+)/);\n    if (doiMatch) {\n      // Decode URL-encoded DOIs\n      return decodeURIComponent(doiMatch[1]).replace(/%2F/gi, '/');\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for Springer\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new SpringerMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const springerIntegration = new SpringerIntegration();\n","// extension/source-integration/ieee/index.ts\n// IEEE Xplore integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('ieee-integration');\n\n/**\n * Custom metadata extractor for IEEE Xplore pages\n */\nclass IEEEMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    // Fallback to HTML extraction\n    const authorElements = this.document.querySelectorAll('.authors-info .author span');\n    if (authorElements.length > 0) {\n      return Array.from(authorElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n\n    // IEEE often has abstract in a specific div\n    if (!metaDescription) {\n      const abstractDiv = this.document.querySelector('.abstract-text');\n      if (abstractDiv) {\n        return abstractDiv.textContent?.trim() || '';\n      }\n    }\n\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n\n  /**\n   * Extract journal/conference name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    // IEEE-specific keyword extraction from HTML\n    const keywordElements = this.document.querySelectorAll('.keywords .keyword');\n    if (keywordElements.length > 0) {\n      return Array.from(keywordElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean) as string[];\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * IEEE Xplore integration\n */\nexport class IEEEIntegration extends BaseSourceIntegration {\n  readonly id = 'ieee';\n  readonly name = 'IEEE Xplore';\n\n  // URL patterns for IEEE articles\n  readonly urlPatterns = [\n    // Standard document URLs\n    /ieeexplore\\.ieee\\.org\\/document\\/(\\d+)/,\n    /ieeexplore\\.ieee\\.org\\/abstract\\/document\\/(\\d+)/,\n    // Stamp (full text) URLs\n    /ieeexplore\\.ieee\\.org\\/stamp\\/stamp\\.jsp\\?.*arnumber=(\\d+)/,\n    // PDF direct links\n    /ieeexplore\\.ieee\\.org\\/ielx?\\d*\\/\\d+\\/\\d+\\/(\\d+)\\.pdf/,\n    // XPL URLs (older format)\n    /ieeexplore\\.ieee\\.org\\/xpl\\/articleDetails\\.jsp\\?arnumber=(\\d+)/,\n    /ieeexplore\\.ieee\\.org\\/xpl\\/tocresult\\.jsp/,\n    // Course/content URLs\n    /ieeexplore\\.ieee\\.org\\/courses\\/details\\/(\\d+)/,\n    // IEEE Computer Society\n    /computer\\.org\\/csdl\\/\\w+\\/\\d+\\/\\d+\\/(\\d+)/,\n    // Generic document pattern\n    /ieeexplore\\.ieee\\.org\\/document\\//,\n    /ieeexplore\\.ieee\\.org\\/abstract\\/document\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /ieeexplore\\.ieee\\.org\\/(document|abstract|stamp|ielx?\\d*|xpl)\\//.test(url) ||\n           /computer\\.org\\/csdl\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (document number) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try document/abstract URL\n    const docMatch = url.match(/document\\/(\\d+)/);\n    if (docMatch) {\n      return docMatch[1];\n    }\n\n    // Try arnumber parameter\n    const arnumberMatch = url.match(/arnumber=(\\d+)/);\n    if (arnumberMatch) {\n      return arnumberMatch[1];\n    }\n\n    // Try PDF URL format\n    const pdfMatch = url.match(/\\/(\\d+)\\.pdf/);\n    if (pdfMatch) {\n      return pdfMatch[1];\n    }\n\n    // Try IEEE Computer Society format\n    const csdlMatch = url.match(/csdl\\/\\w+\\/\\d+\\/\\d+\\/(\\d+)/);\n    if (csdlMatch) {\n      return csdlMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for IEEE\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new IEEEMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const ieeeIntegration = new IEEEIntegration();\n","// extension/source-integration/acm/index.ts\n// ACM Digital Library integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('acm-integration');\n\n/**\n * Custom metadata extractor for ACM DL pages\n */\nclass ACMMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"dc.Title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           this.getMetaContent('meta[name=\"dc.Date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"dc.Identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal/conference name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           this.getMetaContent('meta[name=\"dc.Source\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * ACM Digital Library integration\n */\nexport class ACMIntegration extends BaseSourceIntegration {\n  readonly id = 'acm';\n  readonly name = 'ACM Digital Library';\n\n  // URL patterns for ACM articles\n  readonly urlPatterns = [\n    // Standard DOI URLs (handles various DOI formats including alphanumeric)\n    /dl\\.acm\\.org\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /dl\\.acm\\.org\\/doi\\/abs\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /dl\\.acm\\.org\\/doi\\/full\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /dl\\.acm\\.org\\/doi\\/pdf\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /dl\\.acm\\.org\\/doi\\/epdf\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Legacy citation URLs\n    /dl\\.acm\\.org\\/citation\\.cfm\\?id=(\\d+)/,\n    /dl\\.acm\\.org\\/citation\\.cfm\\?.*doid=[\\d.]+\\.(\\d+)/,\n    // Proceeding URLs\n    /dl\\.acm\\.org\\/doi\\/proceedings\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Book chapters\n    /dl\\.acm\\.org\\/doi\\/book\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Generic ACM DL pattern\n    /dl\\.acm\\.org\\/doi\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /dl\\.acm\\.org\\/(doi|citation)/.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI or citation ID) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try DOI format (most common, handles alphanumeric DOIs)\n    const doiMatch = url.match(/dl\\.acm\\.org\\/doi\\/(?:abs|full|pdf|epdf|proceedings|book)?\\/?((10\\.\\d+\\/[^\\s?#]+))/);\n    if (doiMatch) {\n      return doiMatch[2] || doiMatch[1];\n    }\n\n    // Try legacy citation.cfm format\n    const legacyMatch = url.match(/citation\\.cfm\\?.*id=(\\d+)/);\n    if (legacyMatch) {\n      return legacyMatch[1];\n    }\n\n    // Try doid format\n    const doidMatch = url.match(/doid=[\\d.]+\\.(\\d+)/);\n    if (doidMatch) {\n      return doidMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for ACM\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new ACMMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const acmIntegration = new ACMIntegration();\n","// extension/source-integration/acl/index.ts\n// ACL Anthology integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('acl-integration');\n\n/**\n * Custom metadata extractor for ACL Anthology pages\n */\nclass ACLMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n\n  /**\n   * Extract conference name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * ACL Anthology integration for computational linguistics papers\n */\nexport class ACLIntegration extends BaseSourceIntegration {\n  readonly id = 'acl';\n  readonly name = 'ACL Anthology';\n\n  // URL patterns for ACL Anthology papers (various formats)\n  readonly urlPatterns = [\n    // Current ACL Anthology format (e.g., 2023.acl-main.1)\n    /aclanthology\\.org\\/([A-Z0-9]+\\.\\d+-[a-z]+-\\d+)/i,\n    /aclanthology\\.org\\/([A-Z0-9]+\\.\\d+-\\d+)/,\n    // Older ACL Anthology format (e.g., P18-1001)\n    /aclanthology\\.org\\/([A-Z]\\d{2}-\\d+)/,\n    // Legacy aclweb.org URLs\n    /aclweb\\.org\\/anthology\\/([A-Z0-9]+\\.\\d+-\\d+)/,\n    /aclweb\\.org\\/anthology\\/([A-Z]\\d{2}-\\d+)/,\n    // PDF variants\n    /aclanthology\\.org\\/([^\\/]+)\\.pdf/,\n    // Volumes\n    /aclanthology\\.org\\/volumes\\/([^\\/\\s?#]+)/,\n    // Generic ACL patterns\n    /aclanthology\\.org\\/[A-Z0-9]/i,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /aclanthology\\.org\\/[A-Z0-9]/i.test(url) ||\n           /aclweb\\.org\\/anthology\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try new format (e.g., 2023.acl-main.1)\n    const newFormatMatch = url.match(/aclanthology\\.org\\/([A-Z0-9]+\\.[a-z0-9-]+)/i);\n    if (newFormatMatch) {\n      return newFormatMatch[1].replace(/\\.pdf$/, '');\n    }\n\n    // Try old format (e.g., P18-1001)\n    const oldFormatMatch = url.match(/(?:aclanthology|aclweb)\\.org\\/(?:anthology\\/)?([A-Z]\\d{2}-\\d+)/);\n    if (oldFormatMatch) {\n      return oldFormatMatch[1];\n    }\n\n    // Try volume format\n    const volumeMatch = url.match(/volumes\\/([^\\/\\s?#]+)/);\n    if (volumeMatch) {\n      return volumeMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for ACL\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new ACLMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const aclIntegration = new ACLIntegration();\n","// extension/source-integration/neurips/index.ts\n// NeurIPS proceedings integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('neurips-integration');\n\n/**\n * Custom metadata extractor for NeurIPS pages\n */\nclass NeurIPSMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    // Fallback to HTML extraction\n    const authorElements = this.document.querySelectorAll('.author a, .author span');\n    if (authorElements.length > 0) {\n      return Array.from(authorElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n\n    // NeurIPS often has abstract in a specific section\n    if (!metaDescription) {\n      const abstractSection = this.document.querySelector('.abstract');\n      if (abstractSection) {\n        return abstractSection.textContent?.trim() || '';\n      }\n    }\n\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract conference name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           'NeurIPS' ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * NeurIPS proceedings integration\n */\nexport class NeurIPSIntegration extends BaseSourceIntegration {\n  readonly id = 'neurips';\n  readonly name = 'NeurIPS';\n\n  // URL patterns for NeurIPS papers (multiple domains and formats)\n  readonly urlPatterns = [\n    // proceedings.neurips.cc (current main site)\n    /proceedings\\.neurips\\.cc\\/paper\\/(\\d+)\\/hash\\/([a-f0-9]+)/,\n    /proceedings\\.neurips\\.cc\\/paper\\/(\\d+)\\/file\\/([a-f0-9]+)/,\n    /proceedings\\.neurips\\.cc\\/paper_files\\/paper\\/(\\d+)\\/hash\\/([a-f0-9]+)/,\n    /proceedings\\.neurips\\.cc\\/paper_files\\/paper\\/(\\d+)\\/file\\/([a-f0-9]+)/,\n    // papers.nips.cc (legacy domain)\n    /papers\\.nips\\.cc\\/paper\\/(\\d+)\\/hash\\/([a-f0-9]+)/,\n    /papers\\.nips\\.cc\\/paper\\/(\\d+)\\/file\\/([a-f0-9]+)/,\n    /papers\\.nips\\.cc\\/paper_files\\/paper\\/(\\d+)\\/hash\\/([a-f0-9]+)/,\n    // Title-based URLs (older format)\n    /papers\\.nips\\.cc\\/paper\\/(\\d+)-([^\\/\\s]+)/,\n    /proceedings\\.neurips\\.cc\\/paper\\/(\\d+)-([^\\/\\s]+)/,\n    // Generic NeurIPS paper patterns\n    /proceedings\\.neurips\\.cc\\/paper/,\n    /papers\\.nips\\.cc\\/paper/,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /proceedings\\.neurips\\.cc\\/paper/.test(url) ||\n           /papers\\.nips\\.cc\\/paper/.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try hash/file format (current)\n    const hashMatch = url.match(/paper(?:_files)?\\/paper\\/(\\d+)\\/(?:hash|file)\\/([a-f0-9]+)/);\n    if (hashMatch) {\n      return `${hashMatch[1]}-${hashMatch[2]}`;\n    }\n\n    // Try title-based format (older)\n    const titleMatch = url.match(/paper\\/(\\d+)-([^\\/\\s.]+)/);\n    if (titleMatch) {\n      return `${titleMatch[1]}-${titleMatch[2]}`;\n    }\n\n    // Try just year + anything\n    const yearMatch = url.match(/paper(?:_files)?\\/paper\\/(\\d+)\\/([^\\/\\s]+)/);\n    if (yearMatch) {\n      return `${yearMatch[1]}-${yearMatch[2]}`;\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for NeurIPS\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new NeurIPSMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const neuripsIntegration = new NeurIPSIntegration();\n","// extension/source-integration/cvf/index.ts\n// CVF Open Access integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('cvf-integration');\n\n/**\n * Custom metadata extractor for CVF pages\n */\nclass CVFMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    // Fallback to HTML extraction\n    const authorElements = this.document.querySelectorAll('.author a, #authors b');\n    if (authorElements.length > 0) {\n      return Array.from(authorElements)\n        .map(el => el.textContent?.trim())\n        .filter(Boolean)\n        .join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n\n    // CVF has abstract in a specific div\n    if (!metaDescription) {\n      const abstractDiv = this.document.querySelector('#abstract');\n      if (abstractDiv) {\n        return abstractDiv.textContent?.trim() || '';\n      }\n    }\n\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract conference name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * CVF Open Access integration for CVPR, ICCV, WACV\n */\nexport class CVFIntegration extends BaseSourceIntegration {\n  readonly id = 'cvf';\n  readonly name = 'CVF Open Access';\n\n  // URL patterns for CVF papers (CVPR, ICCV, WACV, etc.)\n  readonly urlPatterns = [\n    // HTML paper pages\n    /openaccess\\.thecvf\\.com\\/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/]html[_\\/]([^.]+)\\.html/i,\n    /openaccess\\.thecvf\\.com\\/content\\/([A-Z]+)(\\d+)[_\\/]html[_\\/]([^.]+)\\.html/i,\n    // PDF papers\n    /openaccess\\.thecvf\\.com\\/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/]papers[_\\/]([^.]+)\\.pdf/i,\n    /openaccess\\.thecvf\\.com\\/content\\/([A-Z]+)(\\d+)[_\\/]papers[_\\/]([^.]+)\\.pdf/i,\n    // Workshop papers\n    /openaccess\\.thecvf\\.com\\/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/]W\\d+[_\\/]html[_\\/]([^.]+)\\.html/i,\n    /openaccess\\.thecvf\\.com\\/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/]W\\d+[_\\/]papers[_\\/]([^.]+)\\.pdf/i,\n    // Supplementary materials\n    /openaccess\\.thecvf\\.com\\/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/]supplemental[_\\/]([^.]+)/i,\n    // Generic CVF content pattern\n    /openaccess\\.thecvf\\.com\\/content/,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /openaccess\\.thecvf\\.com\\/content/.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract conference, year, and paper name from various formats\n    // Format 1: content_CONF_YEAR/html/paper.html\n    const format1 = url.match(/content[_\\/]([A-Z]+)[_\\/](\\d+)[_\\/](?:W\\d+[_\\/])?(?:html|papers)[_\\/]([^.\\/]+)/i);\n    if (format1) {\n      return `${format1[1]}-${format1[2]}-${format1[3]}`;\n    }\n\n    // Format 2: content/CONFYEAR/html/paper.html\n    const format2 = url.match(/content\\/([A-Z]+)(\\d{4})[_\\/](?:W\\d+[_\\/])?(?:html|papers)[_\\/]([^.\\/]+)/i);\n    if (format2) {\n      return `${format2[1]}-${format2[2]}-${format2[3]}`;\n    }\n\n    // Fallback: just extract the paper name from the path\n    const fallback = url.match(/\\/([^\\/]+)\\.(?:html|pdf)$/);\n    if (fallback) {\n      return fallback[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for CVF\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new CVFMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const cvfIntegration = new CVFIntegration();\n","// extension/source-integration/wiley/index.ts\n// Wiley Online Library integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('wiley-integration');\n\n/**\n * Custom metadata extractor for Wiley pages\n */\nclass WileyMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"dc.Title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           this.getMetaContent('meta[name=\"dc.Date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"dc.Identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           this.getMetaContent('meta[name=\"dc.Source\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * Wiley Online Library integration\n */\nexport class WileyIntegration extends BaseSourceIntegration {\n  readonly id = 'wiley';\n  readonly name = 'Wiley Online Library';\n\n  // URL patterns for Wiley articles\n  readonly urlPatterns = [\n    // Standard DOI URLs\n    /onlinelibrary\\.wiley\\.com\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /onlinelibrary\\.wiley\\.com\\/doi\\/abs\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /onlinelibrary\\.wiley\\.com\\/doi\\/full\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /onlinelibrary\\.wiley\\.com\\/doi\\/pdf\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /onlinelibrary\\.wiley\\.com\\/doi\\/epdf\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Wiley society journals (e.g., physoc.onlinelibrary.wiley.com)\n    /\\w+\\.onlinelibrary\\.wiley\\.com\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /\\w+\\.onlinelibrary\\.wiley\\.com\\/doi\\/abs\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    /\\w+\\.onlinelibrary\\.wiley\\.com\\/doi\\/full\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // AGU Publications (agupubs)\n    /agupubs\\.onlinelibrary\\.wiley\\.com\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // FEBS journals\n    /febs\\.onlinelibrary\\.wiley\\.com\\/doi\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Generic Wiley DOI pattern\n    /onlinelibrary\\.wiley\\.com\\/doi\\//,\n    /\\.onlinelibrary\\.wiley\\.com\\/doi\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /\\.?onlinelibrary\\.wiley\\.com\\/doi\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract DOI from URL path (handles all variants)\n    const doiMatch = url.match(/\\/doi\\/(?:abs|full|pdf|epdf)?\\/?((10\\.\\d+\\/[^\\s?#]+))/);\n    if (doiMatch) {\n      return doiMatch[2] || doiMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for Wiley\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new WileyMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const wileyIntegration = new WileyIntegration();\n","// extension/source-integration/plos/index.ts\n// PLOS integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('plos-integration');\n\n/**\n * Custom metadata extractor for PLOS pages\n */\nclass PLOSMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"dc.title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           this.getMetaContent('meta[name=\"dc.date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"dc.identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * PLOS (Public Library of Science) integration\n */\nexport class PLOSIntegration extends BaseSourceIntegration {\n  readonly id = 'plos';\n  readonly name = 'PLOS';\n\n  // URL patterns for PLOS articles (all PLOS journals)\n  readonly urlPatterns = [\n    // Standard article URLs with DOI parameter\n    /journals\\.plos\\.org\\/\\w+\\/article\\?id=(10\\.\\d+\\/[^\\s&]+)/,\n    // URL encoded DOI format\n    /journals\\.plos\\.org\\/\\w+\\/article\\/info[:%]3Adoi[/%]2F(10\\.\\d+)/,\n    // Generic PLOS article URL (for canHandleUrl)\n    /journals\\.plos\\.org\\/\\w+\\/article/,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /journals\\.plos\\.org\\/\\w+\\/article/.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract DOI from id parameter\n    const idMatch = url.match(/[?&]id=(10\\.\\d+\\/[^\\s&]+)/);\n    if (idMatch) {\n      return decodeURIComponent(idMatch[1]);\n    }\n\n    // Try URL encoded DOI format\n    const encodedMatch = url.match(/doi[/%]2F(10\\.\\d+[/%]2F[^\\s&]+)/i);\n    if (encodedMatch) {\n      return decodeURIComponent(encodedMatch[1].replace(/%2F/gi, '/'));\n    }\n\n    // Fallback: generate from URL\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for PLOS\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new PLOSMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const plosIntegration = new PLOSIntegration();\n","// extension/source-integration/biorxiv/index.ts\n// bioRxiv integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('biorxiv-integration');\n\n/**\n * Custom metadata extractor for bioRxiv pages\n */\nclass BioRxivMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"DC.Title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           this.getMetaContent('meta[name=\"DC.Date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"DC.Identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal/venue name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           'bioRxiv' ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * bioRxiv integration for preprints in biology\n */\nexport class BioRxivIntegration extends BaseSourceIntegration {\n  readonly id = 'biorxiv';\n  readonly name = 'bioRxiv';\n\n  // URL patterns for bioRxiv preprints\n  readonly urlPatterns = [\n    // DOI-based content URLs (most common)\n    /biorxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Early preprint URLs (legacy format)\n    /biorxiv\\.org\\/content\\/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/,\n    // Full/abs/pdf variants\n    /biorxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.full/,\n    /biorxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.abstract/,\n    /biorxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.pdf/,\n    // Collection URLs\n    /biorxiv\\.org\\/cgi\\/content\\/full\\/(\\d+)/,\n    /biorxiv\\.org\\/cgi\\/content\\/abstract\\/(\\d+)/,\n    // Generic content pattern\n    /biorxiv\\.org\\/content\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /biorxiv\\.org\\/(content|cgi\\/content)\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI or early ID) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try DOI format (remove version suffix like v1, v2, etc.)\n    const doiMatch = url.match(/biorxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#.]+)/);\n    if (doiMatch) {\n      return doiMatch[1].replace(/v\\d+$/, '');\n    }\n\n    // Try early format\n    const earlyMatch = url.match(/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/);\n    if (earlyMatch) {\n      return earlyMatch[1];\n    }\n\n    // Try cgi format\n    const cgiMatch = url.match(/cgi\\/content\\/(?:full|abstract)\\/(\\d+)/);\n    if (cgiMatch) {\n      return cgiMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for bioRxiv\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new BioRxivMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const bioRxivIntegration = new BioRxivIntegration();\n","// extension/source-integration/medrxiv/index.ts\n// medRxiv integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('medrxiv-integration');\n\n/**\n * Custom metadata extractor for medRxiv pages\n */\nclass MedRxivMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]') ||\n                      this.getMetaContent('meta[name=\"DC.Title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"citation_abstract\"]') ||\n                            this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           this.getMetaContent('meta[name=\"DC.Date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') ||\n           this.getMetaContent('meta[name=\"DC.Identifier\"]') ||\n           super.extractDoi();\n  }\n\n  /**\n   * Extract journal/venue name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           'medRxiv' ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * medRxiv integration for medical preprints\n */\nexport class MedRxivIntegration extends BaseSourceIntegration {\n  readonly id = 'medrxiv';\n  readonly name = 'medRxiv';\n\n  // URL patterns for medRxiv preprints\n  readonly urlPatterns = [\n    // DOI-based content URLs (most common)\n    /medrxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)/,\n    // Early preprint URLs (legacy format)\n    /medrxiv\\.org\\/content\\/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/,\n    // Full/abs/pdf variants\n    /medrxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.full/,\n    /medrxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.abstract/,\n    /medrxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#]+)\\.pdf/,\n    // Collection URLs\n    /medrxiv\\.org\\/cgi\\/content\\/full\\/(\\d+)/,\n    /medrxiv\\.org\\/cgi\\/content\\/abstract\\/(\\d+)/,\n    // Generic content pattern\n    /medrxiv\\.org\\/content\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /medrxiv\\.org\\/(content|cgi\\/content)\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID (DOI or early ID) from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try DOI format (remove version suffix like v1, v2, etc.)\n    const doiMatch = url.match(/medrxiv\\.org\\/content\\/(10\\.\\d+\\/[^\\s?#.]+)/);\n    if (doiMatch) {\n      return doiMatch[1].replace(/v\\d+$/, '');\n    }\n\n    // Try early format\n    const earlyMatch = url.match(/early\\/\\d+\\/\\d+\\/\\d+\\/(\\d+)/);\n    if (earlyMatch) {\n      return earlyMatch[1];\n    }\n\n    // Try cgi format\n    const cgiMatch = url.match(/cgi\\/content\\/(?:full|abstract)\\/(\\d+)/);\n    if (cgiMatch) {\n      return cgiMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for medRxiv\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new MedRxivMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const medRxivIntegration = new MedRxivIntegration();\n","// extension/source-integration/ssrn/index.ts\n// SSRN integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('ssrn-integration');\n\n/**\n * Custom metadata extractor for SSRN pages\n */\nclass SSRNMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_online_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI if available\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n\n  /**\n   * Extract journal/series name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           'SSRN' ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * SSRN (Social Science Research Network) integration\n */\nexport class SSRNIntegration extends BaseSourceIntegration {\n  readonly id = 'ssrn';\n  readonly name = 'SSRN';\n\n  // URL patterns for SSRN papers\n  readonly urlPatterns = [\n    // Short URL format\n    /ssrn\\.com\\/abstract=(\\d+)/,\n    // Legacy sol3/papers.cfm format\n    /papers\\.ssrn\\.com\\/sol3\\/papers\\.cfm\\?abstract_id=(\\d+)/,\n    /papers\\.ssrn\\.com\\/sol3\\/papers\\.cfm\\?.*abstract_id=(\\d+)/,\n    // Delivery format\n    /papers\\.ssrn\\.com\\/sol3\\/Delivery\\.cfm.*abstractid=(\\d+)/i,\n    // Direct link format\n    /ssrn\\.com\\/(\\d{7,})/,\n    // DOI format\n    /dx\\.doi\\.org\\/10\\.2139\\/ssrn\\.(\\d+)/,\n    // Generic SSRN patterns\n    /ssrn\\.com\\/abstract/,\n    /papers\\.ssrn\\.com\\/sol3\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /ssrn\\.com\\/(abstract|sol3|\\d{7})/.test(url) ||\n           /papers\\.ssrn\\.com\\/sol3\\//.test(url) ||\n           /doi\\.org\\/10\\.2139\\/ssrn/.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try abstract= format\n    const abstractMatch = url.match(/abstract[=_]?(\\d+)/i);\n    if (abstractMatch) {\n      return abstractMatch[1];\n    }\n\n    // Try abstract_id= format\n    const abstractIdMatch = url.match(/abstract_id=(\\d+)/i);\n    if (abstractIdMatch) {\n      return abstractIdMatch[1];\n    }\n\n    // Try DOI format\n    const doiMatch = url.match(/10\\.2139\\/ssrn\\.(\\d+)/);\n    if (doiMatch) {\n      return doiMatch[1];\n    }\n\n    // Try direct numeric ID in URL path\n    const directMatch = url.match(/ssrn\\.com\\/(\\d{7,})/);\n    if (directMatch) {\n      return directMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for SSRN\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new SSRNMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const ssrnIntegration = new SSRNIntegration();\n","// extension/source-integration/semanticscholar/index.ts\n// Semantic Scholar integration with custom metadata extractor\n\nimport { BaseSourceIntegration } from '../base-source';\nimport { MetadataExtractor } from '../metadata-extractor';\nimport { loguru } from '../../utils/logger';\n\nconst logger = loguru.getLogger('semanticscholar-integration');\n\n/**\n * Custom metadata extractor for Semantic Scholar pages\n */\nclass SemanticScholarMetadataExtractor extends MetadataExtractor {\n  /**\n   * Extract title using citation meta tags\n   */\n  protected extractTitle(): string {\n    const metaTitle = this.getMetaContent('meta[name=\"citation_title\"]') ||\n                      this.getMetaContent('meta[property=\"og:title\"]');\n    return metaTitle || super.extractTitle();\n  }\n\n  /**\n   * Extract authors from citation meta tags\n   */\n  protected extractAuthors(): string {\n    const citationAuthors: string[] = [];\n    this.document.querySelectorAll('meta[name=\"citation_author\"]').forEach(el => {\n      const content = el.getAttribute('content');\n      if (content) citationAuthors.push(content);\n    });\n\n    if (citationAuthors.length > 0) {\n      return citationAuthors.join(', ');\n    }\n\n    return super.extractAuthors();\n  }\n\n  /**\n   * Extract abstract/description\n   */\n  protected extractDescription(): string {\n    const metaDescription = this.getMetaContent('meta[name=\"description\"]') ||\n                            this.getMetaContent('meta[property=\"og:description\"]');\n    return metaDescription || super.extractDescription();\n  }\n\n  /**\n   * Extract publication date\n   */\n  protected extractPublishedDate(): string {\n    return this.getMetaContent('meta[name=\"citation_publication_date\"]') ||\n           this.getMetaContent('meta[name=\"citation_date\"]') ||\n           super.extractPublishedDate();\n  }\n\n  /**\n   * Extract DOI if available\n   */\n  protected extractDoi(): string {\n    return this.getMetaContent('meta[name=\"citation_doi\"]') || super.extractDoi();\n  }\n\n  /**\n   * Extract journal/venue name\n   */\n  protected extractJournalName(): string {\n    return this.getMetaContent('meta[name=\"citation_journal_title\"]') ||\n           this.getMetaContent('meta[name=\"citation_conference_title\"]') ||\n           super.extractJournalName();\n  }\n\n  /**\n   * Extract keywords/tags\n   */\n  protected extractTags(): string[] {\n    const keywords = this.getMetaContent('meta[name=\"citation_keywords\"]') ||\n                    this.getMetaContent('meta[name=\"keywords\"]');\n\n    if (keywords) {\n      return keywords.split(/[;,]/).map(tag => tag.trim()).filter(Boolean);\n    }\n\n    return super.extractTags();\n  }\n}\n\n/**\n * Semantic Scholar integration\n */\nexport class SemanticScholarIntegration extends BaseSourceIntegration {\n  readonly id = 'semanticscholar';\n  readonly name = 'Semantic Scholar';\n\n  // URL patterns for Semantic Scholar papers\n  readonly urlPatterns = [\n    // Standard paper URL with title slug and corpus ID\n    /semanticscholar\\.org\\/paper\\/[^/]+\\/([a-f0-9]+)/,\n    // Paper URL without title slug (direct ID)\n    /semanticscholar\\.org\\/paper\\/([a-f0-9]{40})/,\n    // CorpusID-based URL\n    /semanticscholar\\.org\\/paper\\/[^?]*[?&]corpusId=(\\d+)/,\n    // Reader URL\n    /semanticscholar\\.org\\/reader\\/([a-f0-9]+)/,\n    // Author paper pages\n    /semanticscholar\\.org\\/author\\/[^/]+\\/papers/,\n    // Generic paper pattern\n    /semanticscholar\\.org\\/paper\\//,\n  ];\n\n  /**\n   * Check if this integration can handle the given URL\n   */\n  canHandleUrl(url: string): boolean {\n    return /semanticscholar\\.org\\/(paper|reader)\\//.test(url);\n  }\n\n  /**\n   * Extract paper ID from URL\n   */\n  extractPaperId(url: string): string | null {\n    // Try to extract 40-character hex ID (SHA)\n    const shaMatch = url.match(/\\/([a-f0-9]{40})/);\n    if (shaMatch) {\n      return shaMatch[1];\n    }\n\n    // Try corpus ID from query params\n    const corpusMatch = url.match(/[?&]corpusId=(\\d+)/);\n    if (corpusMatch) {\n      return `corpus:${corpusMatch[1]}`;\n    }\n\n    // Try shorter hex ID format\n    const shortIdMatch = url.match(/semanticscholar\\.org\\/(?:paper|reader)\\/[^/]*\\/([a-f0-9]+)/);\n    if (shortIdMatch) {\n      return shortIdMatch[1];\n    }\n\n    return null;\n  }\n\n  /**\n   * Create custom metadata extractor for Semantic Scholar\n   */\n  protected createMetadataExtractor(document: Document): MetadataExtractor {\n    return new SemanticScholarMetadataExtractor(document);\n  }\n}\n\n// Export singleton instance\nexport const semanticScholarIntegration = new SemanticScholarIntegration();\n","// extension/source-integration/misc/index.ts\n/*\n * Catch-all for registering with URL pattern only\n * This integration handles papers from various academic sources not covered by specific integrations\n */\nimport { BaseSourceIntegration } from '../base-source';\n\nexport class MiscIntegration extends BaseSourceIntegration {\n  readonly id = 'url-misc';\n  readonly name = 'misc tracked url';\n\n  // URL patterns for link detection - these enable the annotation icon on matching links\n  readonly urlPatterns = [\n    // ScienceDirect\n    /sciencedirect\\.com\\/science\\/article\\//,\n    // PhilPapers\n    /philpapers\\.org\\/rec\\//,\n    // NeurIPS proceedings\n    /proceedings\\.neurips\\.cc\\/paper_files\\/paper\\//,\n    /papers\\.nips\\.cc\\/paper_files\\/paper\\//,\n    // Sage Journals\n    /journals\\.sagepub\\.com\\/doi\\//,\n    // Springer Link\n    /link\\.springer\\.com\\/article\\//,\n    // Science.org\n    /science\\.org\\/doi\\//,\n    // APS Journals\n    /journals\\.aps\\.org\\/\\w+\\/abstract\\//,\n    // Wiley\n    /onlinelibrary\\.wiley\\.com\\/doi\\//,\n    /physoc\\.onlinelibrary\\.wiley\\.com\\/doi\\//,\n    // Cell Press\n    /cell\\.com\\/.*\\/fulltext\\//,\n    // ResearchGate\n    /researchgate\\.net\\/publication\\//,\n    // APA PsycNET\n    /psycnet\\.apa\\.org\\/record\\//,\n    // bioRxiv/medRxiv\n    /biorxiv\\.org\\/content\\//,\n    /medrxiv\\.org\\/content\\//,\n    // OSF Preprints\n    /osf\\.io\\/preprints\\//,\n    // Frontiers\n    /frontiersin\\.org\\/journals?\\//,\n    /frontiersin\\.org\\/articles?\\//,\n    // JSTOR\n    /jstor\\.org\\/stable\\//,\n    // PMLR (Proceedings of Machine Learning Research)\n    /proceedings\\.mlr\\.press\\//,\n    // PLOS\n    /journals\\.plos\\.org\\/\\w+\\/article/,\n    // IEEE Xplore\n    /ieeexplore\\.ieee\\.org\\/document\\//,\n    /ieeexplore\\.ieee\\.org\\/abstract\\/document\\//,\n    // Royal Society\n    /royalsocietypublishing\\.org\\/doi\\//,\n    // PhilArchive\n    /philarchive\\.org\\/archive\\//,\n    // Taylor & Francis\n    /tandfonline\\.com\\/doi\\//,\n    // IOP Science\n    /iopscience\\.iop\\.org\\/article\\//,\n    // Oxford Academic\n    /academic\\.oup\\.com\\/\\w+\\/article/,\n    // eLife\n    /elifesciences\\.org\\/articles\\//,\n    // eScholarship\n    /escholarship\\.org\\/content\\//,\n    // PubMed Central\n    /pmc\\.ncbi\\.nlm\\.nih\\.gov\\/articles\\//,\n    /ncbi\\.nlm\\.nih\\.gov\\/pmc\\/articles\\//,\n    // PubMed\n    /pubmed\\.ncbi\\.nlm\\.nih\\.gov\\/\\d+/,\n    // CVF Open Access\n    /openaccess\\.thecvf\\.com\\/content/,\n    // Zenodo\n    /zenodo\\.org\\/records?\\//,\n    // ASM Journals\n    /journals\\.asm\\.org\\/doi\\//,\n    // BMJ\n    /bmj\\.com\\/content\\//,\n    // ACL Anthology\n    /aclanthology\\.org\\/[A-Z0-9.-]+\\//,\n    // AMS Journals\n    /journals\\.ametsoc\\.org\\/view\\/journals\\//,\n    // Substack (for academic newsletters)\n    /substack\\.com\\/p\\//,\n    // CiteSeerX\n    /citeseerx\\.ist\\.psu\\.edu\\//,\n    // Hugging Face Papers\n    /huggingface\\.co\\/papers\\//,\n    // Papers With Code\n    /paperswithcode\\.com\\/paper\\//,\n    // Google Scholar direct links\n    /scholar\\.google\\.com\\/scholar\\?.*cluster=/,\n    // SSRN\n    /papers\\.ssrn\\.com\\/sol3\\/papers\\.cfm/,\n    /ssrn\\.com\\/abstract=/,\n    // Cambridge Core\n    /cambridge\\.org\\/core\\/journals\\/.*\\/article\\//,\n    // Annual Reviews\n    /annualreviews\\.org\\/doi\\//,\n    // Generic DOI patterns\n    /\\/doi\\/(?:abs|full|pdf|epdf)?\\/?10\\.\\d+\\//,\n    // Generic PDF patterns (academic contexts)\n    /\\.pdf(?:\\?|$)/,\n  ];\n\n  // Content script matches - used for canHandleUrl checks\n  readonly contentScriptMatches = [\n    \"sciencedirect.com/science/article/\",\n    \"philpapers.org/rec/\",\n    \"proceedings.neurips.cc/paper_files/paper/\",\n    \"journals.sagepub.com/doi/\",\n    \"link.springer.com/article/\",\n    \".science.org/doi/\",\n    \"journals.aps.org/prx/abstract/\",\n    \"onlinelibrary.wiley.com/doi/\",\n    \"cell.com/trends/cognitive-sciences/fulltext/\",\n    \"researchgate.net/publication/\",\n    \"psycnet.apa.org/record/\",\n    \"biorxiv.org/content/\",\n    \"medrxiv.org/content/\",\n    \"osf.io/preprints/\",\n    \"frontiersin.org/journals/\",\n    \"frontiersin.org/articles/\",\n    \"jstor.org/stable/\",\n    \"proceedings.mlr.press/\",\n    \"journals.plos.org/plosone/article\",\n    \"ieeexplore.ieee.org/document/\",\n    \"royalsocietypublishing.org/doi/\",\n    \"papers.nips.cc/paper_files/paper/\",\n    \"philarchive.org/archive/\",\n    \"tandfonline.com/doi/\",\n    \"iopscience.iop.org/article/\",\n    \"academic.oup.com/brain/article/\",\n    \"elifesciences.org/articles/\",\n    \"escholarship.org/content/\",\n    \"pmc.ncbi.nlm.nih.gov/articles/\",\n    \"ncbi.nlm.nih.gov/pmc/articles/\",\n    \"pubmed.ncbi.nlm.nih.gov/\",\n    \"openaccess.thecvf.com/content/\",\n    \"zenodo.org/records/\",\n    \"journals.asm.org/doi/full/\",\n    \"physoc.onlinelibrary.wiley.com/doi/full/\",\n    \"storage.courtlistener.com/recap/\",\n    \"bmj.com/content/\",\n    \"ntsb.gov/investigations/pages\",\n    \"ntsb.gov/investigations/AccidentReports\",\n    \"aclanthology.org/\",\n    \"journals.ametsoc.org/view/journals/\",\n    \"huggingface.co/papers/\",\n    \"paperswithcode.com/paper/\",\n    \"papers.ssrn.com/\",\n    \"ssrn.com/abstract=\",\n    \"cambridge.org/core/journals/\",\n    \"annualreviews.org/doi/\",\n    \"substack.com/p/\",\n    \"citeseerx.\",\n    \"/doi/\",\n    \"/pdf/\",\n  ];\n\n  canHandleUrl(url: string): boolean {\n    // First check urlPatterns (regex)\n    if (this.urlPatterns.some(pattern => pattern.test(url))) {\n      return true;\n    }\n    // Then check contentScriptMatches (substring)\n    return this.contentScriptMatches.some(pattern => url.includes(pattern));\n  }\n}\n\nexport const miscIntegration = new MiscIntegration();\n","// extension/source-integration/registry.ts\n// Central registry for all source integrations\n\nimport { SourceIntegration } from './types';\nimport { arxivIntegration } from './arxiv';\nimport { openReviewIntegration } from './openreview';\nimport { natureIntegration } from './nature';\nimport { pnasIntegration } from './pnas';\nimport { scienceDirectIntegration } from './sciencedirect';\nimport { springerIntegration } from './springer';\nimport { ieeeIntegration } from './ieee';\nimport { acmIntegration } from './acm';\nimport { aclIntegration } from './acl';\nimport { neuripsIntegration } from './neurips';\nimport { cvfIntegration } from './cvf';\nimport { wileyIntegration } from './wiley';\nimport { plosIntegration } from './plos';\nimport { bioRxivIntegration } from './biorxiv';\nimport { medRxivIntegration } from './medrxiv';\nimport { ssrnIntegration } from './ssrn';\nimport { semanticScholarIntegration } from './semanticscholar';\nimport { miscIntegration } from './misc';\n\nexport const sourceIntegrations: SourceIntegration[] = [\n  arxivIntegration,\n  openReviewIntegration,\n  natureIntegration,\n  pnasIntegration,\n  scienceDirectIntegration,\n  springerIntegration,\n  ieeeIntegration,\n  acmIntegration,\n  aclIntegration,\n  neuripsIntegration,\n  cvfIntegration,\n  wileyIntegration,\n  plosIntegration,\n  bioRxivIntegration,\n  medRxivIntegration,\n  ssrnIntegration,\n  semanticScholarIntegration,\n  miscIntegration,\n];\n\n/*     *     *     *     */\n\nexport function getAllIntegrations(): SourceIntegration[] {\n  return sourceIntegrations;\n}\n\nexport function getIntegrationById(id: string): SourceIntegration | undefined {\n  return sourceIntegrations.find(integration => integration.id === id);\n}\n\nexport function getAllContentScriptMatches(): string[] {\n  return sourceIntegrations.flatMap(integration => integration.contentScriptMatches);\n}\n","// background.ts\n// Background script with simplified session tracking\n\nimport { GitHubStoreClient } from 'gh-store-client';\nimport { PaperManager } from './papers/manager';\nimport { SessionService } from './utils/session-service';\nimport { PopupManager } from './utils/popup-manager';\nimport { SourceIntegrationManager } from './source-integration/source-manager';\nimport { loguru } from './utils/logger';\nimport { PaperMetadata } from './papers/types';\n\n// Import from central registry instead of individual integrations\nimport { sourceIntegrations } from './source-integration/registry';\nimport { Message } from './source-integration/types';\n\nconst logger = loguru.getLogger('background');\n\n// Global state\nlet githubToken = '';\nlet githubRepo = '';\nlet paperManager: PaperManager | null = null;\nlet sessionService: SessionService | null = null;\nlet popupManager: PopupManager | null = null;\nlet sourceManager: SourceIntegrationManager | null = null;\n\n// Initialize sources\nfunction initializeSources() {\n  sourceManager = new SourceIntegrationManager();\n  \n  // Register all sources from the central registry\n  for (const integration of sourceIntegrations) {\n    sourceManager.registerSource(integration);\n  }\n  \n  logger.info('Source manager initialized with integrations:', \n    sourceIntegrations.map(int => int.id).join(', '));\n  \n  return sourceManager;\n}\n\n// Initialize everything\nasync function initialize() {\n  try {\n    // Initialize sources first\n    initializeSources();\n    \n    // Load GitHub credentials\n    const items = await chrome.storage.sync.get(['githubToken', 'githubRepo']);\n    githubToken = items.githubToken || '';\n    githubRepo = items.githubRepo || '';\n    logger.info('Credentials loaded', { hasToken: !!githubToken, hasRepo: !!githubRepo });\n    \n    // Initialize paper manager if we have credentials\n    if (githubToken && githubRepo) {\n      const githubClient = new GitHubStoreClient(githubToken, githubRepo);\n      \n      // Pass the source manager to the paper manager\n      paperManager = new PaperManager(githubClient, sourceManager!);\n      logger.info('Paper manager initialized');\n      \n      // Initialize session service with paper manager\n      sessionService = new SessionService(paperManager);\n    } else {\n      // Initialize session service without paper manager\n      sessionService = new SessionService(null);\n    }\n    \n    logger.info('Session service initialized');\n    \n    // Initialize popup manager\n    popupManager = new PopupManager(\n      () => sourceManager,\n      () => paperManager\n    );\n    logger.info('Popup manager initialized');\n    \n    // Set up message listeners\n    setupMessageListeners();\n    \n    // Initialize debug objects\n    initializeDebugObjects();\n  } catch (error) {\n    logger.error('Initialization error', error);\n  }\n}\n\n// Set up message listeners\nfunction setupMessageListeners() {\n  chrome.runtime.onMessage.addListener((message: any, sender, sendResponse) => {\n    if (message.type === 'contentScriptReady' && sender.tab?.id) {\n      logger.debug('Content script ready:', sender.tab.url);\n      sendResponse({ success: true });\n      return true;\n    }\n    \n    if (message.type === 'paperMetadata' && message.metadata) {\n      // Store metadata received from content script\n      handlePaperMetadata(message.metadata);\n      sendResponse({ success: true });\n      return true;\n    }\n    \n    if (message.type === 'getCurrentPaper') {\n      const session = sessionService?.getCurrentSession();\n      const paperMetadata = session \n        ? sessionService?.getPaperMetadata(session.sourceId, session.paperId)\n        : null;\n      \n      logger.debug('Popup requested current paper', paperMetadata);\n      sendResponse(paperMetadata);\n      return true;\n    }\n    \n    if (message.type === 'updateRating') {\n      logger.debug('Rating update requested:', message.rating);\n      handleUpdateRating(message.rating, sendResponse);\n      return true; // Will respond asynchronously\n    }\n    \n    if (message.type === 'startSession') {\n      handleStartSession(message.sourceId, message.paperId);\n      sendResponse({ success: true });\n      return true;\n    }\n    \n    if (message.type === 'sessionHeartbeat') {\n      handleSessionHeartbeat();\n      sendResponse({ success: true });\n      return true;\n    }\n    \n    if (message.type === 'endSession') {\n      handleEndSession(message.reason || 'user_action');\n      sendResponse({ success: true });\n      return true;\n    }\n\n    // New handler for manual paper logging from popup\n    if (message.type === 'manualPaperLog' && message.metadata) {\n      handleManualPaperLog(message.metadata)\n        .then(() => sendResponse({ success: true }))\n        .catch(error => {\n          logger.error('Error handling manual paper log', error);\n          sendResponse({ \n            success: false, \n            error: error instanceof Error ? error.message : 'Unknown error' \n          });\n        });\n      return true; // Will respond asynchronously\n    }\n    \n    // Other message handlers are managed by PopupManager\n    \n    return false; // Not handled\n  });\n}\n\n// Handle paper metadata from content script\nasync function handlePaperMetadata(metadata: PaperMetadata) {\n  logger.info(`Received metadata for ${metadata.sourceId}:${metadata.paperId}`);\n  \n  try {\n    // Store metadata in session service\n    if (sessionService) {\n      sessionService.storePaperMetadata(metadata);\n    }\n    \n    // Store in GitHub if we have a paper manager\n    if (paperManager) {\n      await paperManager.getOrCreatePaper(metadata);\n      logger.debug('Paper metadata stored in GitHub');\n    }\n  } catch (error) {\n    logger.error('Error handling paper metadata', error);\n  }\n}\n\n// Handle rating update\nasync function handleUpdateRating(rating: string, sendResponse: (response: any) => void) {\n  if (!paperManager || !sessionService) {\n    sendResponse({ success: false, error: 'Services not initialized' });\n    return;\n  }\n\n  const session = sessionService.getCurrentSession();\n  if (!session) {\n    sendResponse({ success: false, error: 'No current session' });\n    return;\n  }\n\n  const metadata = sessionService.getPaperMetadata();\n  if (!metadata) {\n    sendResponse({ success: false, error: 'No paper metadata available' });\n    return;\n  }\n\n  try {\n    await paperManager.updateRating(\n      session.sourceId,\n      session.paperId, \n      rating,\n      metadata\n    );\n    \n    // Update stored metadata with new rating\n    metadata.rating = rating;\n    \n    sendResponse({ success: true });\n  } catch (error) {\n    logger.error('Error updating rating:', error);\n    sendResponse({ success: false, error: error instanceof Error ? error.message : 'Unknown error' });\n  }\n}\n\n// Handle session start request\nfunction handleStartSession(sourceId: string, paperId: string) {\n  if (!sessionService) {\n    logger.error('Session service not initialized');\n    return;\n  }\n  \n  // Get metadata if available\n  const existingMetadata = sessionService.getPaperMetadata(sourceId, paperId);\n  \n  // Start the session\n  sessionService.startSession(sourceId, paperId, existingMetadata);\n  logger.info(`Started session for ${sourceId}:${paperId}`);\n}\n\n// Handle session heartbeat\nfunction handleSessionHeartbeat() {\n  if (!sessionService) {\n    logger.error('Session service not initialized');\n    return;\n  }\n  \n  sessionService.recordHeartbeat();\n}\n\n// Handle session end request\nfunction handleEndSession(reason: string) {\n  if (!sessionService) {\n    logger.error('Session service not initialized');\n    return;\n  }\n  \n  const session = sessionService.getCurrentSession();\n  if (session) {\n    logger.info(`Ending session: ${reason}`);\n    sessionService.endSession();\n  }\n}\n\nasync function handleManualPaperLog(metadata: PaperMetadata): Promise<void> {\n  logger.info(`Received manual paper log: ${metadata.sourceId}:${metadata.paperId}`);\n  \n  try {\n    // Store metadata in session service\n    if (sessionService) {\n      sessionService.storePaperMetadata(metadata);\n    }\n    \n    // Store in GitHub if we have a paper manager\n    if (paperManager) {\n      await paperManager.getOrCreatePaper(metadata);\n      logger.debug('Manually logged paper stored in GitHub');\n    }\n  } catch (error) {\n    logger.error('Error handling manual paper log', error);\n    throw error;\n  }\n}\n\n// Listen for credential changes\nchrome.storage.onChanged.addListener(async (changes) => {\n  logger.debug('Storage changes detected', Object.keys(changes));\n  \n  if (changes.githubToken) {\n    githubToken = changes.githubToken.newValue;\n  }\n  if (changes.githubRepo) {\n    githubRepo = changes.githubRepo.newValue;\n  }\n  \n  // Reinitialize paper manager if credentials changed\n  if (changes.githubToken || changes.githubRepo) {\n    if (githubToken && githubRepo) {\n      const githubClient = new GitHubStoreClient(githubToken, githubRepo);\n      \n      // Pass the source manager to the paper manager\n      paperManager = new PaperManager(githubClient, sourceManager!);\n      logger.info('Paper manager reinitialized');\n      \n      // Reinitialize session service with new paper manager\n      sessionService = new SessionService(paperManager);\n      logger.info('Session service reinitialized');\n    }\n  }\n});\n\n// Initialize debug objects in service worker scope\nfunction initializeDebugObjects() {\n  // @ts-ignore\n  self.__DEBUG__ = {\n    get paperManager() { return paperManager; },\n    get sessionService() { return sessionService; },\n    get popupManager() { return popupManager; },\n    get sourceManager() { return sourceManager; },\n    getGithubClient: () => paperManager ? paperManager.getClient() : null,\n    getCurrentPaper: () => {\n      const session = sessionService?.getCurrentSession();\n      return session ? sessionService?.getPaperMetadata(session.sourceId, session.paperId) : null;\n    },\n    getSessionStats: () => sessionService?.getSessionStats(),\n    getSources: () => sourceManager?.getAllSources(),\n    forceEndSession: () => sessionService?.endSession()\n  };\n\n  logger.info('Debug objects registered');\n}\n\n// Initialize extension\ninitialize();\n"],"names":["logger","GitHubStoreClient"],"mappings":"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"}